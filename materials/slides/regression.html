<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.24">

  <title>Machine learning with scikit-learn in Python – Regression</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-bae7157585a0062695a0c98e2c735676.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Regression</h1>
  <p class="subtitle">K-NN Regression, Linear Regression and L1 regularization</p>

<div class="quarto-title-authors">
</div>

</section>
<section class="slide level2">

<div>
<div id="pyodide-1" class="exercise-cell">

</div>
<script type="pyodide-1-contents">
eyJhdHRyIjp7ImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiaW5jbHVkZSI6ZmFsc2UsIm91dHB1dCI6ZmFsc2V9LCJjb2RlIjoiaW1wb3J0IHBhbmRhcyBhcyBwZFxucGQuc2V0X29wdGlvbignZGlzcGxheS5tYXhfcm93cycsIDUpIn0=
</script>
</div>
</section>
<section id="session-learning-objectives" class="slide level2">
<h2>Session learning objectives</h2>
<ul>
<li>Recognize situations where a regression analysis would be appropriate for making predictions.</li>
<li>Explain the K-nearest neighbors (K-NN) regression algorithm and describe how it differs from K-NN classification.</li>
<li>Describe the advantages and disadvantages of K-nearest neighbors and linear regression.</li>
<li>Use Python to fit linear regression models on training data.</li>
<li>Evaluate the linear regression model on test data.</li>
<li>Describe how linear regression is affected by outliers and multicollinearity.</li>
<li>Learn how to apply LASSO regression (L1 regularization) for feature selection and regularization to improve model performance.</li>
</ul>
</section>
<section id="the-regression-problem" class="slide level2">
<h2>The regression problem</h2>
<ul>
<li>Predictive problem</li>
<li>Use past information to predict future observations</li>
<li>Predict <em>numerical</em> values instead of <em>categorical</em> values</li>
</ul>
<p>Examples:</p>
<ul>
<li>Race time in the Boston marathon</li>
<li>size of a house to predict its sale price</li>
</ul>
</section>
<section id="regression-methods" class="slide level2">
<h2>Regression Methods</h2>
<p>In this workshop:</p>
<ul>
<li>K-nearest neighbors (brief overview)</li>
<li>Linear regression</li>
<li>L1 regularization</li>
</ul>
</section>
<section id="classification-similarities-to-regression" class="slide level2">
<h2>Classification similarities to regression</h2>
<p>Similarities:</p>
<ul>
<li class="fragment">Predict a new observation’s response variable based on past observations</li>
<li class="fragment">Split the data into training and test sets</li>
<li class="fragment">Use cross-validation to evaluate different choices of model parameters <br></li>
</ul>
<p>Difference:</p>
<ul>
<li class="fragment">Predicting numerical variables instead of categorical variables</li>
</ul>
</section>
<section id="explore-a-data-set" class="slide level2">
<h2>Explore a data set</h2>
<p><a href="https://support.spatialkey.com/spatialkey-sample-csv-data/">932 real estate transactions in Sacramento, California</a></p>
<blockquote>
<p>Can we use the size of a house in the Sacramento, CA area to predict its sale price?</p>
</blockquote>
</section>
<section id="package-setup" class="slide level2">
<h2>Package setup</h2>
<div>
<div id="pyodide-2" class="exercise-cell">

</div>
<script type="pyodide-2-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiaW1wb3J0IGFsdGFpciBhcyBhbHRcbmltcG9ydCBudW1weSBhcyBucFxuaW1wb3J0IHBhbmRhcyBhcyBwZFxuZnJvbSBza2xlYXJuLm1vZGVsX3NlbGVjdGlvbiBpbXBvcnQgR3JpZFNlYXJjaENWLCB0cmFpbl90ZXN0X3NwbGl0XG5mcm9tIHNrbGVhcm4uY29tcG9zZSBpbXBvcnQgbWFrZV9jb2x1bW5fdHJhbnNmb3JtZXJcbmZyb20gc2tsZWFybi5waXBlbGluZSBpbXBvcnQgbWFrZV9waXBlbGluZVxuZnJvbSBza2xlYXJuLnByZXByb2Nlc3NpbmcgaW1wb3J0IFN0YW5kYXJkU2NhbGVyXG5mcm9tIHNrbGVhcm4gaW1wb3J0IHNldF9jb25maWdcblxuIyBPdXRwdXQgZGF0YWZyYW1lcyBpbnN0ZWFkIG9mIGFycmF5c1xuc2V0X2NvbmZpZyh0cmFuc2Zvcm1fb3V0cHV0PSdwYW5kYXMnKSJ9
</script>
</div>
</section>
<section id="data" class="slide level2">
<h2>Data</h2>
<div>
<div id="pyodide-3" class="exercise-cell">

</div>
<script type="pyodide-3-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoic2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2JylcbnByaW50KHNhY3JhbWVudG8pIn0=
</script>
</div>
</section>
<section id="price-vs-sq.ft" class="slide level2">
<h2>Price vs Sq.Ft</h2>
<div>
<div id="pyodide-4" class="exercise-cell">

</div>
<script type="pyodide-4-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcblxuc2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2Jylcbm5wLnJhbmRvbS5zZWVkKDEwKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5cbnNjYXR0ZXIgPSBhbHQuQ2hhcnQoc2FjcmFtZW50bykubWFya19jaXJjbGUoKS5lbmNvZGUoXG4gICAgeD1hbHQuWChcInNxZnRcIilcbiAgICAgICAgLnNjYWxlKHplcm89RmFsc2UpXG4gICAgICAgIC50aXRsZShcIkhvdXNlIHNpemUgKHNxdWFyZSBmZWV0KVwiKSxcbiAgICB5PWFsdC5ZKFwicHJpY2VcIilcbiAgICAgICAgLmF4aXMoZm9ybWF0PVwiJCwuMGZcIilcbiAgICAgICAgLnRpdGxlKFwiUHJpY2UgKFVTRClcIilcbilcblxuc2NhdHRlciJ9
</script>
</div>
</section>
<section id="sample-of-data" class="slide level2">
<h2>Sample of data</h2>
<div>
<div id="pyodide-5" class="exercise-cell">

</div>
<script type="pyodide-5-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyBsb29rIGF0IGEgc21hbGwgc2FtcGxlIG9mIGRhdGFcbm5wLnJhbmRvbS5zZWVkKDEwKVxuXG5zbWFsbF9zYWNyYW1lbnRvID0gc2FjcmFtZW50by5zYW1wbGUobj0zMClcbnByaW50KHNtYWxsX3NhY3JhbWVudG8pIn0=
</script>
</div>
</section>
<section id="sample-k-nn-example" class="slide level2">
<h2>Sample: K-NN Example</h2>
<div class="columns">
<div class="column">
<p>House price of 2000</p>
<div>
<div id="pyodide-6" class="exercise-cell">

</div>
<script type="pyodide-6-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcblxuc2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2Jylcbm5wLnJhbmRvbS5zZWVkKDEwKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5cblxuc21hbGxfcGxvdCA9IChcbiAgICBhbHQuQ2hhcnQoc21hbGxfc2FjcmFtZW50bylcbiAgICAubWFya19jaXJjbGUob3BhY2l0eT0xKVxuICAgIC5lbmNvZGUoXG4gICAgICAgIHg9YWx0LlgoJ3NxZnQnKS5zY2FsZSh6ZXJvPUZhbHNlKS50aXRsZSgnSG91c2Ugc2l6ZSAoc3F1YXJlIGZlZXQpJyksXG4gICAgICAgIHk9YWx0LlkoJ3ByaWNlJykuYXhpcyhmb3JtYXQ9JyQsLjBmJykudGl0bGUoJ1ByaWNlIChVU0QpJyksXG4gICAgKVxuKVxuXG4jIGFkZCBhbiBvdmVybGF5IHRvIHRoZSBiYXNlIHBsb3RcbmxpbmVfZGYgPSBwZC5EYXRhRnJhbWUoeyd4JzogWzIwMDBdfSlcbnJ1bGUgPSAoXG4gICAgYWx0LkNoYXJ0KGxpbmVfZGYpXG4gICAgLm1hcmtfcnVsZShzdHJva2VEYXNoPVs2XSwgc2l6ZT0xLjUsIGNvbG9yPSdibGFjaycpXG4gICAgLmVuY29kZSh4PSd4JylcbilcblxuKHNtYWxsX3Bsb3QgKyBydWxlKSJ9
</script>
</div>
</div><div class="column">
<p>5 closest neighbors</p>
<div>
<div id="pyodide-7" class="exercise-cell">

</div>
<script type="pyodide-7-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcblxuc2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2Jylcbm5wLnJhbmRvbS5zZWVkKDEwKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5zbWFsbF9zYWNyYW1lbnRvWydkaXN0J10gPSAoMjAwMCAtIHNtYWxsX3NhY3JhbWVudG9bJ3NxZnQnXSkuYWJzKClcbm5lYXJlc3RfbmVpZ2hib3JzID0gc21hbGxfc2FjcmFtZW50by5uc21hbGxlc3QoNSwgJ2Rpc3QnKVxuXG5ubl9wbG90ID0gc21hbGxfcGxvdCArIHJ1bGVcblxuIyBwbG90IGhvcml6b250YWwgbGluZXMgd2hpY2ggaXMgcGVycGVuZGljdWxhciB0byB4PTIwMDBcbmhfbGluZXMgPSBbXVxuZm9yIGkgaW4gcmFuZ2UoNSk6XG4gICAgaF9saW5lX2RmID0gcGQuRGF0YUZyYW1lKFxuICAgICAgICB7XG4gICAgICAgICAgICAnc3FmdCc6IFtuZWFyZXN0X25laWdoYm9ycy5pbG9jW2ksIDRdLCAyMDAwXSxcbiAgICAgICAgICAgICdwcmljZSc6IFtuZWFyZXN0X25laWdoYm9ycy5pbG9jW2ksIDZdXSAqIDIsXG4gICAgICAgIH1cbiAgICApXG4gICAgaF9saW5lcy5hcHBlbmQoXG4gICAgICAgIGFsdC5DaGFydChoX2xpbmVfZGYpXG4gICAgICAgIC5tYXJrX2xpbmUoY29sb3I9J2JsYWNrJylcbiAgICAgICAgLmVuY29kZSh4PSdzcWZ0JywgeT0ncHJpY2UnKVxuICAgIClcblxuIyBoaWdobGlnaHQgdGhlIG5lYXJlc3QgbmVpZ2hib3JzIGluIG9yYW5nZVxub3JhbmdlX25laWdoYnJzID0gKFxuICAgIGFsdC5DaGFydChuZWFyZXN0X25laWdoYm9ycylcbiAgICAubWFya19jaXJjbGUob3BhY2l0eT0xLCBjb2xvcj0nI2ZmN2YwZScpXG4gICAgLmVuY29kZShcbiAgICAgICAgeD1hbHQuWCgnc3FmdCcpLnNjYWxlKHplcm89RmFsc2UpLnRpdGxlKCdIb3VzZSBzaXplIChzcXVhcmUgZmVldCknKSxcbiAgICAgICAgeT1hbHQuWSgncHJpY2UnKS5heGlzKGZvcm1hdD0nJCwuMGYnKS50aXRsZSgnUHJpY2UgKFVTRCknKSxcbiAgICApXG4pXG5cbm5uX3Bsb3QgPSBhbHQubGF5ZXIoKmhfbGluZXMsIHNtYWxsX3Bsb3QsIG9yYW5nZV9uZWlnaGJycywgcnVsZSlcblxubm5fcGxvdCJ9
</script>
</div>
</div></div>
</section>
<section id="make-and-visualize-prediction" class="slide level2">
<h2>Make and visualize prediction</h2>
<div>
<div id="pyodide-8" class="exercise-cell">

</div>
<script type="pyodide-8-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoic21hbGxfc2FjcmFtZW50b1snZGlzdCddID0gKDIwMDAgLSBzbWFsbF9zYWNyYW1lbnRvWydzcWZ0J10pLmFicygpXG5uZWFyZXN0X25laWdoYm9ycyA9IHNtYWxsX3NhY3JhbWVudG8ubnNtYWxsZXN0KDUsICdkaXN0JylcbnByZWRpY3Rpb24gPSBuZWFyZXN0X25laWdoYm9yc1sncHJpY2UnXS5tZWFuKClcbnByaW50KHByZWRpY3Rpb24pIn0=
</script>
</div>
<div>
<div id="pyodide-9" class="exercise-cell">

</div>
<script type="pyodide-9-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcblxuc2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2Jylcbm5wLnJhbmRvbS5zZWVkKDEwKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5zbWFsbF9zYWNyYW1lbnRvWydkaXN0J10gPSAoMjAwMCAtIHNtYWxsX3NhY3JhbWVudG9bJ3NxZnQnXSkuYWJzKClcbm5lYXJlc3RfbmVpZ2hib3JzID0gc21hbGxfc2FjcmFtZW50by5uc21hbGxlc3QoNSwgJ2Rpc3QnKVxucHJlZGljdGlvbiA9IG5lYXJlc3RfbmVpZ2hib3JzWydwcmljZSddLm1lYW4oKVxuXG5ubl9wbG90X3ByZWQgPSBubl9wbG90ICsgYWx0LkNoYXJ0KFxuICAgIHBkLkRhdGFGcmFtZSh7XCJzcWZ0XCI6IFsyMDAwXSwgXCJwcmljZVwiOiBbcHJlZGljdGlvbl19KVxuKS5tYXJrX2NpcmNsZShzaXplPTgwLCBvcGFjaXR5PTEsIGNvbG9yPVwiI2Q2MjcyOFwiKS5lbmNvZGUoeD1cInNxZnRcIiwgeT1cInByaWNlXCIpXG5cbm5uX3Bsb3RfcHJlZCJ9
</script>
</div>
</section>
<section id="splitting-the-data" class="slide level2">
<h2>Splitting the data</h2>
<div>
<div id="pyodide-10" class="exercise-cell">

</div>
<script type="pyodide-10-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoibnAucmFuZG9tLnNlZWQoMSlcblxuc2FjcmFtZW50b190cmFpbiwgc2FjcmFtZW50b190ZXN0ID0gdHJhaW5fdGVzdF9zcGxpdChcbiAgICBzYWNyYW1lbnRvLCB0cmFpbl9zaXplPTAuNzVcbikifQ==
</script>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>We are not specifying the stratify argument. The <code>train_test_split()</code> function cannot stratify on a quantitative variable</p>
</div>
</div>
</div>
</section>
<section id="metric-rmspe" class="slide level2">
<h2>Metric: RMS(P)E</h2>
<p>Root Mean Square (Prediction) Error</p>
<p><span class="math display">\[\text{RMSPE} = \sqrt{\frac{1}{n}\sum\limits_{i=1}^{n}(y_i - \hat{y}_i)^2}\]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(n\)</span> is the number of observations,</li>
<li><span class="math inline">\(y_i\)</span> is the observed value for the <span class="math inline">\(i^\text{th}\)</span> observation, and</li>
<li><span class="math inline">\(\hat{y}_i\)</span> is the forecasted/predicted value for the <span class="math inline">\(i^\text{th}\)</span> observation.</li>
</ul>
</section>
<section id="metric-visualize" class="slide level2">
<h2>Metric: Visualize</h2>
<div>
<div id="pyodide-11" class="exercise-cell">

</div>
<script type="pyodide-11-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IEdyaWRTZWFyY2hDViwgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmNvbXBvc2UgaW1wb3J0IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyXG5mcm9tIHNrbGVhcm4ucGlwZWxpbmUgaW1wb3J0IG1ha2VfcGlwZWxpbmVcbmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBTdGFuZGFyZFNjYWxlclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5ucC5yYW5kb20uc2VlZCgxMClcbnNtYWxsX3NhY3JhbWVudG8gPSBzYWNyYW1lbnRvLnNhbXBsZShuPTMwKVxuc21hbGxfc2FjcmFtZW50b1snZGlzdCddID0gKDIwMDAgLSBzbWFsbF9zYWNyYW1lbnRvWydzcWZ0J10pLmFicygpXG5uZWFyZXN0X25laWdoYm9ycyA9IHNtYWxsX3NhY3JhbWVudG8ubnNtYWxsZXN0KDUsICdkaXN0JylcbnByZWRpY3Rpb24gPSBuZWFyZXN0X25laWdoYm9yc1sncHJpY2UnXS5tZWFuKClcblxuXG5mcm9tIHNrbGVhcm4ubmVpZ2hib3JzIGltcG9ydCBLTmVpZ2hib3JzUmVncmVzc29yXG5cbiMgKHN5bnRoZXRpYykgbmV3IHByZWRpY3Rpb24gcG9pbnRzXG5wdHMgPSBwZC5EYXRhRnJhbWUoXG4gICAgeydzcWZ0JzogWzEyMDAsIDE4NTAsIDIyNTBdLCAncHJpY2UnOiBbMzAwMDAwLCAyMDAwMDAsIDUwMDAwMF19XG4pXG5maW5lZ3JpZCA9IHBkLkRhdGFGcmFtZSh7J3NxZnQnOiBucC5hcmFuZ2UoNjAwLCAzOTAxLCAxMCl9KVxuXG4jIHByZXByb2Nlc3MgdGhlIGRhdGEsIG1ha2UgdGhlIHBpcGVsaW5lXG5zYWNyX3ByZXByb2Nlc3NvciA9IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyKChTdGFuZGFyZFNjYWxlcigpLCBbJ3NxZnQnXSkpXG5zYWNyX3BpcGVsaW5lID0gbWFrZV9waXBlbGluZShcbiAgICBzYWNyX3ByZXByb2Nlc3NvciwgS05laWdoYm9yc1JlZ3Jlc3NvcihuX25laWdoYm9ycz00KVxuKVxuXG4jIGZpdCB0aGUgbW9kZWxcblggPSBzbWFsbF9zYWNyYW1lbnRvW1snc3FmdCddXVxueSA9IHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXVxuc2Fjcl9waXBlbGluZS5maXQoWCwgeSlcblxuIyBwcmVkaWN0IG9uIHRoZSBmdWxsIGdyaWQgYW5kIG5ldyBkYXRhIHB0c1xuc2Fjcl9mdWxsX3ByZWRzX2hpZCA9IHBkLmNvbmNhdChcbiAgICAoXG4gICAgICAgIGZpbmVncmlkLFxuICAgICAgICBwZC5EYXRhRnJhbWUoc2Fjcl9waXBlbGluZS5wcmVkaWN0KGZpbmVncmlkKSwgY29sdW1ucz1bJ3ByZWRpY3RlZCddKSxcbiAgICApLFxuICAgIGF4aXM9MSxcbilcblxuc2Fjcl9uZXdfcHJlZHNfaGlkID0gcGQuY29uY2F0KFxuICAgIChcbiAgICAgICAgc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnLCAncHJpY2UnXV0ucmVzZXRfaW5kZXgoKSxcbiAgICAgICAgcGQuRGF0YUZyYW1lKFxuICAgICAgICAgICAgc2Fjcl9waXBlbGluZS5wcmVkaWN0KHNtYWxsX3NhY3JhbWVudG9bWydzcWZ0JywgJ3ByaWNlJ11dKSxcbiAgICAgICAgICAgIGNvbHVtbnM9WydwcmVkaWN0ZWQnXSxcbiAgICAgICAgKSxcbiAgICApLFxuICAgIGF4aXM9MSxcbikuZHJvcChjb2x1bW5zPVsnaW5kZXgnXSlcblxuIyB0byBtYWtlIGFsdGFpciBtYXJrX2xpbmUgd29ya3MsIG5lZWQgdG8gY3JlYXRlIHNlcGFyYXRlIGRhdGFmcmFtZXMgZm9yIGVhY2ggdmVydGljYWwgZXJyb3IgbGluZVxuZXJyb3JzX3Bsb3QgPSAoXG4gICAgc21hbGxfcGxvdFxuICAgICsgYWx0LkNoYXJ0KHNhY3JfZnVsbF9wcmVkc19oaWQpXG4gICAgLm1hcmtfbGluZShjb2xvcj0nI2ZmN2YwZScpXG4gICAgLmVuY29kZSh4PSdzcWZ0JywgeT0ncHJlZGljdGVkJylcbiAgICArIGFsdC5DaGFydChzYWNyX25ld19wcmVkc19oaWQpXG4gICAgLm1hcmtfY2lyY2xlKG9wYWNpdHk9MSlcbiAgICAuZW5jb2RlKHg9J3NxZnQnLCB5PSdwcmljZScpXG4pXG5zYWNyX25ld19wcmVkc19tZWx0ZWRfZGYgPSBzYWNyX25ld19wcmVkc19oaWQubWVsdChpZF92YXJzPVsnc3FmdCddKVxudl9saW5lcyA9IFtdXG5mb3IgaSBpbiBzYWNyX25ld19wcmVkc19oaWRbJ3NxZnQnXTpcbiAgICBsaW5lX2RmID0gc2Fjcl9uZXdfcHJlZHNfbWVsdGVkX2RmLnF1ZXJ5KGYnc3FmdCA9PSB7aX0nKVxuICAgIHZfbGluZXMuYXBwZW5kKFxuICAgICAgICBhbHQuQ2hhcnQobGluZV9kZikubWFya19saW5lKGNvbG9yPSdibGFjaycpLmVuY29kZSh4PSdzcWZ0JywgeT0ndmFsdWUnKVxuICAgIClcblxuZXJyb3JzX3Bsb3QgPSBhbHQubGF5ZXIoKnZfbGluZXMsIGVycm9yc19wbG90KVxuZXJyb3JzX3Bsb3QifQ==
</script>
</div>
</section>
<section id="rmspe-vs-rmse" class="slide level2">
<h2>RMSPE vs RMSE</h2>
<p>Root Mean Square (Prediction) Error</p>
<ul>
<li>RMSPE: the error calculated on the non-training dataset</li>
<li>RMSE: the error calcualted on the training dataset</li>
</ul>
<p>This notation is a statistics distinction, you will most likely see RMSPE written as RMSE.</p>
</section>
<section id="choosing-k" class="slide level2">
<h2>Choosing <span class="math inline">\(k\)</span></h2>
<p>As we did previously, we can use cross-validation and select the value of <span class="math inline">\(k\)</span> that yields the lowest RMSE to choose the best model.</p>
<div>
<div id="pyodide-12" class="exercise-cell">

</div>
<script type="pyodide-12-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZX0sImNvZGUiOiJcbmltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IEdyaWRTZWFyY2hDViwgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmNvbXBvc2UgaW1wb3J0IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyXG5mcm9tIHNrbGVhcm4ucGlwZWxpbmUgaW1wb3J0IG1ha2VfcGlwZWxpbmVcbmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBTdGFuZGFyZFNjYWxlclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cblxuc2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2Jylcbm5wLnJhbmRvbS5zZWVkKDEwKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5zbWFsbF9zYWNyYW1lbnRvWydkaXN0J10gPSAoMjAwMCAtIHNtYWxsX3NhY3JhbWVudG9bJ3NxZnQnXSkuYWJzKClcbm5lYXJlc3RfbmVpZ2hib3JzID0gc21hbGxfc2FjcmFtZW50by5uc21hbGxlc3QoNSwgJ2Rpc3QnKVxucHJlZGljdGlvbiA9IG5lYXJlc3RfbmVpZ2hib3JzWydwcmljZSddLm1lYW4oKVxuXG5mcm9tIHNrbGVhcm4ubmVpZ2hib3JzIGltcG9ydCBLTmVpZ2hib3JzUmVncmVzc29yXG5cbm5wLnJhbmRvbS5zZWVkKDEpXG5cbnNhY3JhbWVudG9fdHJhaW4sIHNhY3JhbWVudG9fdGVzdCA9IHRyYWluX3Rlc3Rfc3BsaXQoXG4gICAgc2FjcmFtZW50bywgdHJhaW5fc2l6ZT0wLjc1XG4pXG5cbiMgcHJlcHJvY2VzcyB0aGUgZGF0YSwgbWFrZSB0aGUgcGlwZWxpbmVcbnNhY3JfcHJlcHJvY2Vzc29yID0gbWFrZV9jb2x1bW5fdHJhbnNmb3JtZXIoKFN0YW5kYXJkU2NhbGVyKCksIFsnc3FmdCddKSlcbnNhY3JfcGlwZWxpbmUgPSBtYWtlX3BpcGVsaW5lKHNhY3JfcHJlcHJvY2Vzc29yLCBLTmVpZ2hib3JzUmVncmVzc29yKCkpXG5cbiMgY3JlYXRlIHRoZSA1LWZvbGQgR3JpZFNlYXJjaENWIG9iamVjdFxucGFyYW1fZ3JpZCA9IHtcbiAgICAna25laWdoYm9yc3JlZ3Jlc3Nvcl9fbl9uZWlnaGJvcnMnOiByYW5nZSgxLCAyMDEsIDMpLFxufVxuc2Fjcl9ncmlkc2VhcmNoID0gR3JpZFNlYXJjaENWKFxuICAgIGVzdGltYXRvcj1zYWNyX3BpcGVsaW5lLFxuICAgIHBhcmFtX2dyaWQ9cGFyYW1fZ3JpZCxcbiAgICBjdj01LFxuICAgIHNjb3Jpbmc9J25lZ19yb290X21lYW5fc3F1YXJlZF9lcnJvcicsICAjIHdlIHdpbGwgZGVhbCB3aXRoIHRoaXMgbGF0ZXJcbilcblxuIyBmaXQgdGhlIEdyaWRTZWFyY2hDViBvYmplY3RcbnNhY3JfZ3JpZHNlYXJjaC5maXQoXG4gICAgc2FjcmFtZW50b190cmFpbltbJ3NxZnQnXV0sICAjIEEgc2luZ2xlLWNvbHVtbiBkYXRhIGZyYW1lXG4gICAgc2FjcmFtZW50b190cmFpblsncHJpY2UnXSwgICMgQSBzZXJpZXNcbilcblxuIyBzYWNyX2dyaWRzZWFyY2guYmVzdF9wYXJhbXNfXG5cbiMgUmV0cmlldmUgdGhlIENWIHNjb3Jlc1xuc2Fjcl9yZXN1bHRzID0gcGQuRGF0YUZyYW1lKHNhY3JfZ3JpZHNlYXJjaC5jdl9yZXN1bHRzXylcbnNhY3JfcmVzdWx0cyA9IHNhY3JfcmVzdWx0c1tcbiAgICBbXG4gICAgICAgICdwYXJhbV9rbmVpZ2hib3JzcmVncmVzc29yX19uX25laWdoYm9ycycsXG4gICAgICAgICdtZWFuX3Rlc3Rfc2NvcmUnXG4gICAgXVxuXS5yZW5hbWUoY29sdW1ucz17J3BhcmFtX2tuZWlnaGJvcnNyZWdyZXNzb3JfX25fbmVpZ2hib3JzJzogJ25fbmVpZ2hib3JzJ30pXG5cblxuYmVzdF9rX3NhY3IgPSBzYWNyX3Jlc3VsdHNbXCJuX25laWdoYm9yc1wiXVtzYWNyX3Jlc3VsdHNbXCJtZWFuX3Rlc3Rfc2NvcmVcIl0uaWR4bWluKCldXG5iZXN0X2N2X1JNU1BFID0gbWluKHNhY3JfcmVzdWx0c1tcIm1lYW5fdGVzdF9zY29yZVwiXSlcblxuZ3JpZHZhbHMgPSBbXG4gICAgMSxcbiAgICAzLFxuICAgIDI1LFxuICAgIGJlc3Rfa19zYWNyLFxuICAgIDI1MCxcbiAgICBsZW4oc2FjcmFtZW50b190cmFpbiksXG5dXG5cbnBsb3RzID0gbGlzdCgpXG5cbnNhY3JfcHJlcHJvY2Vzc29yID0gbWFrZV9jb2x1bW5fdHJhbnNmb3JtZXIoKFN0YW5kYXJkU2NhbGVyKCksIFsnc3FmdCddKSlcblggPSBzYWNyYW1lbnRvX3RyYWluW1snc3FmdCddXVxueSA9IHNhY3JhbWVudG9fdHJhaW5bWydwcmljZSddXVxuXG5iYXNlX3Bsb3QgPSAoXG4gICAgYWx0LkNoYXJ0KHNhY3JhbWVudG9fdHJhaW4pXG4gICAgLm1hcmtfY2lyY2xlKClcbiAgICAuZW5jb2RlKFxuICAgICAgICB4PWFsdC5YKFxuICAgICAgICAgICAgJ3NxZnQnLFxuICAgICAgICAgICAgdGl0bGU9J0hvdXNlIHNpemUgKHNxdWFyZSBmZWV0KScsXG4gICAgICAgICAgICBzY2FsZT1hbHQuU2NhbGUoemVybz1GYWxzZSksXG4gICAgICAgICksXG4gICAgICAgIHk9YWx0LlkoJ3ByaWNlJywgdGl0bGU9J1ByaWNlIChVU0QpJywgYXhpcz1hbHQuQXhpcyhmb3JtYXQ9JyQsLjBmJykpLFxuICAgIClcbilcbmZvciBpIGluIHJhbmdlKGxlbihncmlkdmFscykpOlxuICAgICMgbWFrZSB0aGUgcGlwZWxpbmUgYmFzZWQgb24gbl9uZWlnaGJvcnNcbiAgICBzYWNyX3BpcGVsaW5lID0gbWFrZV9waXBlbGluZShcbiAgICAgICAgc2Fjcl9wcmVwcm9jZXNzb3IsIEtOZWlnaGJvcnNSZWdyZXNzb3Iobl9uZWlnaGJvcnM9Z3JpZHZhbHNbaV0pXG4gICAgKVxuICAgIHNhY3JfcGlwZWxpbmUuZml0KFgsIHkpXG4gICAgIyBwcmVkaWN0aW9uc1xuICAgIHNhY3JfcHJlZHMgPSBzYWNyYW1lbnRvX3RyYWluXG4gICAgc2Fjcl9wcmVkcyA9IHNhY3JfcHJlZHMuYXNzaWduKFxuICAgICAgICBwcmVkaWN0ZWQ9c2Fjcl9waXBlbGluZS5wcmVkaWN0KHNhY3JhbWVudG9fdHJhaW4pXG4gICAgKVxuICAgICMgb3ZlcmxheSB0aGUgcGxvdHNcbiAgICBwbG90cy5hcHBlbmQoXG4gICAgICAgIGJhc2VfcGxvdFxuICAgICAgICArIGFsdC5DaGFydChzYWNyX3ByZWRzLCB0aXRsZT1mJ0sgPSB7Z3JpZHZhbHNbaV19JylcbiAgICAgICAgLm1hcmtfbGluZShjb2xvcj0nI2ZmN2YwZScpXG4gICAgICAgIC5lbmNvZGUoeD0nc3FmdCcsIHk9J3ByZWRpY3RlZCcpXG4gICAgKVxuXG4ocGxvdHNbMF0gfCBwbG90c1sxXSB8IHBsb3RzWzJdKSAmIChwbG90c1szXSB8IHBsb3RzWzRdIHwgcGxvdHNbNV0pIn0=
</script>
</div>
</section>
<section id="evaluating-on-the-test-set" class="slide level2">
<h2>Evaluating on the test set</h2>
<ul>
<li>Then, as we did before, we retrain the K-NN regression model on the entire training data set using the best <span class="math inline">\(k\)</span>.</li>
</ul>
<blockquote>
<p><em>The code for running cross-validation to get <code>sacr_gridsearch</code> is included at the end of the slides for your reference.</em></p>
</blockquote>
</section>
<section id="final-best-k-model" class="slide level2">
<h2>Final best K model</h2>
<p>Predicted values of house price (orange line) for the final K-NN regression model.</p>

<img data-src="img/regression/prediction.png" class="quarto-figure quarto-figure-center r-stretch"><blockquote>
<p><em>K-NN regression supports multiple predictors - see the end of the slides for Python code demonstrating multivariable K-NN regression.</em></p>
</blockquote>
</section>
<section id="strengths-and-limitations-of-k-nn-regression" class="slide level2">
<h2>Strengths and limitations of K-NN regression</h2>
<p>Strengths:</p>
<ul>
<li>simple, intuitive algorithm</li>
<li>requires few assumptions about what the data must look like</li>
<li>works well with non-linear relationships (i.e., if the relationship is not a straight line)</li>
</ul>
<p>Weaknesses:</p>
<ul>
<li>very slow as the training data gets larger</li>
<li>may not perform well with a large number of predictors</li>
<li>may not predict well beyond the range of values input in your training data</li>
</ul>
</section>
<section id="k-nn-regression-in-scikit-learn" class="slide level2">
<h2>K-NN regression in <code>scikit-learn</code></h2>
<p>We won’t be covering K-NN regression in detail, as the process is very similar to K-NN classification. The main differences are summarized below:</p>
<div style="font-size: 0.85em;">
<table class="caption-top">
<thead>
<tr class="header">
<th>Feature</th>
<th>K-NN Class.</th>
<th>K-NN Regr.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Target</td>
<td>Categorical</td>
<td>Continuous</td>
</tr>
<tr class="even">
<td>Logic</td>
<td>Majority vote</td>
<td>Mean / w.avg</td>
</tr>
<tr class="odd">
<td>Class</td>
<td><code>KNeighborsClassifier</code></td>
<td><code>KNeighborsRegressor</code></td>
</tr>
<tr class="even">
<td>Output</td>
<td>Label</td>
<td>Value</td>
</tr>
<tr class="odd">
<td>Use Case</td>
<td>Classification</td>
<td>Regression</td>
</tr>
<tr class="even">
<td>Metrics</td>
<td>Accuracy, Precision, Recall</td>
<td>RMSE</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="linear-regression" class="slide level2">
<h2>Linear Regression</h2>
<ul>
<li><p>Addresses the limitations from KNN regression</p></li>
<li><p>Provides an interpretable mathematical equation that describes the relationship between the predictor and response variables</p></li>
<li><p>Creates a straight line of best fit through the training data</p></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Logistic regression is the linear model we can use for binary classification</p>
</div>
</div>
</div>
</section>
<section id="sacramento-real-estate" class="slide level2">
<h2>Sacramento real estate</h2>
<div>
<div id="pyodide-13" class="exercise-cell">

</div>
<script type="pyodide-13-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiaW1wb3J0IHBhbmRhcyBhcyBwZFxuXG5zYWNyYW1lbnRvID0gcGQucmVhZF9jc3YoJ2RhdGEvc2FjcmFtZW50by5jc3YnKVxuXG5ucC5yYW5kb20uc2VlZCg0MilcbnNtYWxsX3NhY3JhbWVudG8gPSBzYWNyYW1lbnRvLnNhbXBsZShuPTMwKVxuXG5wcmludChzbWFsbF9zYWNyYW1lbnRvKSJ9
</script>
</div>
</section>
<section id="sacramento-real-estate-best-fit-line" class="slide level2">
<h2>Sacramento real estate: best fit line</h2>
<div class="columns">
<div class="column">
<div>
<div id="pyodide-14" class="exercise-cell">

</div>
<script type="pyodide-14-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IEdyaWRTZWFyY2hDViwgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmNvbXBvc2UgaW1wb3J0IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyXG5mcm9tIHNrbGVhcm4ucGlwZWxpbmUgaW1wb3J0IG1ha2VfcGlwZWxpbmVcbmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBTdGFuZGFyZFNjYWxlclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5cbnNtYWxsX3Bsb3QgPSAoXG4gICAgYWx0LkNoYXJ0KHNtYWxsX3NhY3JhbWVudG8pXG4gICAgLm1hcmtfY2lyY2xlKG9wYWNpdHk9MSlcbiAgICAuZW5jb2RlKFxuICAgICAgICB4PWFsdC5YKCdzcWZ0Jykuc2NhbGUoemVybz1GYWxzZSkudGl0bGUoJ0hvdXNlIHNpemUgKHNxdWFyZSBmZWV0KScpLFxuICAgICAgICB5PWFsdC5ZKCdwcmljZScpXG4gICAgICAgIC5heGlzKGZvcm1hdD0nJCwuMGYnKVxuICAgICAgICAuc2NhbGUoemVybz1GYWxzZSlcbiAgICAgICAgLnRpdGxlKCdQcmljZSAoVVNEKScpLFxuICAgIClcbilcblxuXG4jIGNyZWF0ZSBkZl9saW5lcyB3aXRoIG9uZSBmYWtlL2VtcHR5IGxpbmUgKGZvciBzdGFydGluZyBhdCAybmQgY29sb3IgbGF0ZXIpXG5kZl9saW5lcyA9IHsneCc6IFs1MDAsIDUwMF0sICd5JzogWzEwMDAwMCwgMTAwMDAwXSwgJ251bWJlcic6IFsnLTEnLCAnLTEnXX1cblxuIyBzZXQgdGhlIGRvbWFpbnMgKHJhbmdlIG9mIHggdmFsdWVzKSBvZiBsaW5lc1xubWluX3ggPSBzbWFsbF9zYWNyYW1lbnRvWydzcWZ0J10ubWluKClcbm1heF94ID0gc21hbGxfc2FjcmFtZW50b1snc3FmdCddLm1heCgpXG5cbiMgYWRkIHRoZSBsaW5lIG9mIGJlc3QgZml0XG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMaW5lYXJSZWdyZXNzaW9uXG5cbmxtID0gTGluZWFyUmVncmVzc2lvbigpXG5sbS5maXQoc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnXV0sIHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXSlcbnByZWRfbWluID0gZmxvYXQobG0ucHJlZGljdChwZC5EYXRhRnJhbWUoeydzcWZ0JzogW21pbl94XX0pKSlcbnByZWRfbWF4ID0gZmxvYXQobG0ucHJlZGljdChwZC5EYXRhRnJhbWUoeydzcWZ0JzogW21heF94XX0pKSlcblxuZGZfbGluZXNbJ3gnXS5leHRlbmQoW21pbl94LCBtYXhfeF0pXG5kZl9saW5lc1sneSddLmV4dGVuZChbcHJlZF9taW4sIHByZWRfbWF4XSlcbmRmX2xpbmVzWydudW1iZXInXS5leHRlbmQoWycwJywgJzAnXSlcblxuIyBhZGQgb3RoZXIgc2ltaWxhciBsb29raW5nIGxpbmVzXG5pbnRlcmNlcHRfbCA9IFstNjQ1NDIuMjMsIC02OTAwLCAtNjQ1NDIuMjNdXG5zbG9wZV9sID0gWzE5MCwgMTc1LCAxNjBdXG5mb3IgaSBpbiByYW5nZShsZW4oc2xvcGVfbCkpOlxuICAgIGRmX2xpbmVzWyd4J10uZXh0ZW5kKFttaW5feCwgbWF4X3hdKVxuICAgIGRmX2xpbmVzWyd5J10uZXh0ZW5kKFxuICAgICAgICBbXG4gICAgICAgICAgICBpbnRlcmNlcHRfbFtpXSArIHNsb3BlX2xbaV0gKiBtaW5feCxcbiAgICAgICAgICAgIGludGVyY2VwdF9sW2ldICsgc2xvcGVfbFtpXSAqIG1heF94LFxuICAgICAgICBdXG4gICAgKVxuICAgIGRmX2xpbmVzWydudW1iZXInXS5leHRlbmQoW2Yne2krMX0nLCBmJ3tpKzF9J10pXG5cbmRmX2xpbmVzID0gcGQuRGF0YUZyYW1lKGRmX2xpbmVzKVxuXG4jIHBsb3QgdGhlIGJvZ3VzIGxpbmUgdG8gc2tpcCB0aGUgc2FtZSBjb2xvciBhcyB0aGUgc2NhdHRlclxuc21hbGxfcGxvdCArPSAoXG4gICAgYWx0LkNoYXJ0KGRmX2xpbmVzW2RmX2xpbmVzWydudW1iZXInXSA9PSAnLTEnXSlcbiAgICAubWFya19saW5lKClcbiAgICAuZW5jb2RlKHg9J3gnLCB5PSd5JywgY29sb3I9YWx0LkNvbG9yKCdudW1iZXInLCBsZWdlbmQ9Tm9uZSkpXG4pXG4jIHBsb3QgdGhlIHJlYWwgbGluZSB3aXRoIDJuZCBjb2xvclxuc21hbGxfcGxvdCArPSAoXG4gICAgYWx0LkNoYXJ0KGRmX2xpbmVzW2RmX2xpbmVzWydudW1iZXInXSA9PSAnMCddKVxuICAgIC5tYXJrX2xpbmUoKVxuICAgIC5lbmNvZGUoeD0neCcsIHk9J3knLCBjb2xvcj1hbHQuQ29sb3IoJ251bWJlcicsIGxlZ2VuZD1Ob25lKSlcbilcblxuc21hbGxfcGxvdCJ9
</script>
</div>
</div><div class="column">
<p>The equation for the line is:</p>
<p><span class="math display">\[\text{house sale price} = \beta_0 + \beta_1 \cdot (\text{house size})+\varepsilon,\]</span> where</p>
<ul>
<li><span class="math inline">\(\beta_0\)</span> is the <em>vertical intercept</em> of the line (the price when house size is 0)</li>
<li><span class="math inline">\(\beta_1\)</span> is the <em>slope</em> of the line (how quickly the price increases as you increase house size)</li>
<li><span class="math inline">\(\varepsilon\)</span> is the random error term</li>
</ul>
</div></div>
</section>
<section id="sacramento-real-estate-prediction" class="slide level2">
<h2>Sacramento real estate: Prediction</h2>
<div>
<div id="pyodide-15" class="exercise-cell">

</div>
<script type="pyodide-15-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IEdyaWRTZWFyY2hDViwgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmNvbXBvc2UgaW1wb3J0IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyXG5mcm9tIHNrbGVhcm4ucGlwZWxpbmUgaW1wb3J0IG1ha2VfcGlwZWxpbmVcbmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBTdGFuZGFyZFNjYWxlclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5cbmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExpbmVhclJlZ3Jlc3Npb25cblxubG0gPSBMaW5lYXJSZWdyZXNzaW9uKClcbmxtLmZpdChzbWFsbF9zYWNyYW1lbnRvW1snc3FmdCddXSwgc21hbGxfc2FjcmFtZW50b1tbJ3ByaWNlJ11dKVxucHJlZGljdGlvbiA9IGZsb2F0KGxtLnByZWRpY3QocGQuRGF0YUZyYW1lKHsnc3FmdCc6IFsyMDAwXX0pKSlcblxuIyB0aGUgdmVydGljYWwgZG90dGVkIGxpbmVcbmxpbmVfZGYgPSBwZC5EYXRhRnJhbWUoeyd4JzogWzIwMDBdfSlcbnJ1bGUgPSBhbHQuQ2hhcnQobGluZV9kZikubWFya19ydWxlKHN0cm9rZURhc2g9WzZdLCBzaXplPTEuNSkuZW5jb2RlKHg9J3gnKVxuXG4jIHRoZSByZWQgcG9pbnRcbnBvaW50X2RmID0gcGQuRGF0YUZyYW1lKHsneCc6IFsyMDAwXSwgJ3knOiBbcHJlZGljdGlvbl19KVxucG9pbnQgPSAoXG4gICAgYWx0LkNoYXJ0KHBvaW50X2RmKVxuICAgIC5tYXJrX2NpcmNsZShjb2xvcj0ncmVkJywgc2l6ZT04MCwgb3BhY2l0eT0xKVxuICAgIC5lbmNvZGUoeD0neCcsIHk9J3knKVxuKVxuXG4jIG92ZXJsYXkgYWxsIHBsb3RzXG5zbWFsbF9wbG90XzIwMDBfcHJlZCA9IChcbiAgICBzbWFsbF9wbG90XG4gICAgKyBydWxlXG4gICAgKyBwb2ludFxuICAgICMgYWRkIHRoZSB0ZXh0XG4gICAgKyBhbHQuQ2hhcnQoXG4gICAgICAgIHBkLkRhdGFGcmFtZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAneCc6IFsyNDUwXSxcbiAgICAgICAgICAgICAgICAneSc6IFtwcmVkaWN0aW9uIC0gNDEwMDBdLFxuICAgICAgICAgICAgICAgICdwcmVkaWN0aW9uJzogWyckJyArICd7MDosLjBmfScuZm9ybWF0KHByZWRpY3Rpb24pXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIClcbiAgICAubWFya190ZXh0KGR5PS01LCBzaXplPTE1KVxuICAgIC5lbmNvZGUoeD0neCcsIHk9J3knLCB0ZXh0PSdwcmVkaWN0aW9uJylcbilcblxuc21hbGxfcGxvdF8yMDAwX3ByZWQifQ==
</script>
</div>
</section>
<section id="estimating-a-line" class="slide level2">
<h2>Estimating a line</h2>
<div>
<div id="pyodide-16" class="exercise-cell">

</div>
<script type="pyodide-16-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IEdyaWRTZWFyY2hDViwgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmNvbXBvc2UgaW1wb3J0IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyXG5mcm9tIHNrbGVhcm4ucGlwZWxpbmUgaW1wb3J0IG1ha2VfcGlwZWxpbmVcbmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBTdGFuZGFyZFNjYWxlclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5cblxuc21hbGxfcGxvdCA9IChcbiAgICBhbHQuQ2hhcnQoc21hbGxfc2FjcmFtZW50bylcbiAgICAubWFya19jaXJjbGUob3BhY2l0eT0xKVxuICAgIC5lbmNvZGUoXG4gICAgICAgIHg9YWx0LlgoJ3NxZnQnKS5zY2FsZSh6ZXJvPUZhbHNlKS50aXRsZSgnSG91c2Ugc2l6ZSAoc3F1YXJlIGZlZXQpJyksXG4gICAgICAgIHk9YWx0LlkoJ3ByaWNlJylcbiAgICAgICAgLmF4aXMoZm9ybWF0PSckLC4wZicpXG4gICAgICAgIC5zY2FsZSh6ZXJvPUZhbHNlKVxuICAgICAgICAudGl0bGUoJ1ByaWNlIChVU0QpJyksXG4gICAgKVxuKVxuXG5cbiMgY3JlYXRlIGRmX2xpbmVzIHdpdGggb25lIGZha2UvZW1wdHkgbGluZSAoZm9yIHN0YXJ0aW5nIGF0IDJuZCBjb2xvciBsYXRlcilcbmRmX2xpbmVzID0geyd4JzogWzUwMCwgNTAwXSwgJ3knOiBbMTAwMDAwLCAxMDAwMDBdLCAnbnVtYmVyJzogWyctMScsICctMSddfVxuXG4jIHNldCB0aGUgZG9tYWlucyAocmFuZ2Ugb2YgeCB2YWx1ZXMpIG9mIGxpbmVzXG5taW5feCA9IHNtYWxsX3NhY3JhbWVudG9bJ3NxZnQnXS5taW4oKVxubWF4X3ggPSBzbWFsbF9zYWNyYW1lbnRvWydzcWZ0J10ubWF4KClcblxuIyBhZGQgdGhlIGxpbmUgb2YgYmVzdCBmaXRcbmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExpbmVhclJlZ3Jlc3Npb25cblxubG0gPSBMaW5lYXJSZWdyZXNzaW9uKClcbmxtLmZpdChzbWFsbF9zYWNyYW1lbnRvW1snc3FmdCddXSwgc21hbGxfc2FjcmFtZW50b1tbJ3ByaWNlJ11dKVxucHJlZF9taW4gPSBmbG9hdChsbS5wcmVkaWN0KHBkLkRhdGFGcmFtZSh7J3NxZnQnOiBbbWluX3hdfSkpKVxucHJlZF9tYXggPSBmbG9hdChsbS5wcmVkaWN0KHBkLkRhdGFGcmFtZSh7J3NxZnQnOiBbbWF4X3hdfSkpKVxuXG5kZl9saW5lc1sneCddLmV4dGVuZChbbWluX3gsIG1heF94XSlcbmRmX2xpbmVzWyd5J10uZXh0ZW5kKFtwcmVkX21pbiwgcHJlZF9tYXhdKVxuZGZfbGluZXNbJ251bWJlciddLmV4dGVuZChbJzAnLCAnMCddKVxuXG4jIGFkZCBvdGhlciBzaW1pbGFyIGxvb2tpbmcgbGluZXNcbmludGVyY2VwdF9sID0gWy02NDU0Mi4yMywgLTY5MDAsIC02NDU0Mi4yM11cbnNsb3BlX2wgPSBbMTkwLCAxNzUsIDE2MF1cbmZvciBpIGluIHJhbmdlKGxlbihzbG9wZV9sKSk6XG4gICAgZGZfbGluZXNbJ3gnXS5leHRlbmQoW21pbl94LCBtYXhfeF0pXG4gICAgZGZfbGluZXNbJ3knXS5leHRlbmQoXG4gICAgICAgIFtcbiAgICAgICAgICAgIGludGVyY2VwdF9sW2ldICsgc2xvcGVfbFtpXSAqIG1pbl94LFxuICAgICAgICAgICAgaW50ZXJjZXB0X2xbaV0gKyBzbG9wZV9sW2ldICogbWF4X3gsXG4gICAgICAgIF1cbiAgICApXG4gICAgZGZfbGluZXNbJ251bWJlciddLmV4dGVuZChbZid7aSsxfScsIGYne2krMX0nXSlcblxuZGZfbGluZXMgPSBwZC5EYXRhRnJhbWUoZGZfbGluZXMpXG5cbiMgcGxvdCB0aGUgYm9ndXMgbGluZSB0byBza2lwIHRoZSBzYW1lIGNvbG9yIGFzIHRoZSBzY2F0dGVyXG5zbWFsbF9wbG90ICs9IChcbiAgICBhbHQuQ2hhcnQoZGZfbGluZXNbZGZfbGluZXNbJ251bWJlciddID09ICctMSddKVxuICAgIC5tYXJrX2xpbmUoKVxuICAgIC5lbmNvZGUoeD0neCcsIHk9J3knLCBjb2xvcj1hbHQuQ29sb3IoJ251bWJlcicsIGxlZ2VuZD1Ob25lKSlcbilcbiMgcGxvdCB0aGUgcmVhbCBsaW5lIHdpdGggMm5kIGNvbG9yXG5zbWFsbF9wbG90ICs9IChcbiAgICBhbHQuQ2hhcnQoZGZfbGluZXNbZGZfbGluZXNbJ251bWJlciddID09ICcwJ10pXG4gICAgLm1hcmtfbGluZSgpXG4gICAgLmVuY29kZSh4PSd4JywgeT0neScsIGNvbG9yPWFsdC5Db2xvcignbnVtYmVyJywgbGVnZW5kPU5vbmUpKVxuKVxuXG5zbWFsbF9wbG90XG5cbnNldmVyYWxfbGluZXNfcGxvdCA9IHNtYWxsX3Bsb3QuY29weSgpXG5cbnNldmVyYWxfbGluZXNfcGxvdCArPSBhbHQuQ2hhcnQoXG4gICAgZGZfbGluZXNbZGZfbGluZXNbXCJudW1iZXJcIl0gIT0gXCIwXCJdXG4pLm1hcmtfbGluZSgpLmVuY29kZSh4PVwieFwiLCB5PVwieVwiLCBjb2xvcj1hbHQuQ29sb3IoXCJudW1iZXJcIixsZWdlbmQ9Tm9uZSkpXG5cbnNldmVyYWxfbGluZXNfcGxvdCJ9
</script>
</div>
</section>
<section id="what-makes-the-best-line" class="slide level2">
<h2>What makes the best line?</h2>
<p>To define the <strong>best line</strong> we need to know how to measure the distance of the points to the line!</p>
<p><strong>Which of the following criteria would you choose to define “distance of a point to the line”?</strong></p>

<img data-src="img/regression/dist.png" class="r-stretch"><blockquote>
<p>Figure by Dr.&nbsp;Joel Ostblom</p>
</blockquote>
</section>
<section id="least-squares" class="slide level2">
<h2>Least squares</h2>
<p>Least Squares method minimizes the sum of the squares of the residuals. The <strong>residuals</strong> are the difference between the observed value of the response (<span class="math inline">\(y_i\)</span>) and the predicted value of the response (<span class="math inline">\(\hat{y}_i\)</span>):</p>
<p><span class="math display">\[r_i = y_i-\hat{y}_i\]</span></p>
<div>
<div id="pyodide-17" class="exercise-cell">

</div>
<script type="pyodide-17-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IEdyaWRTZWFyY2hDViwgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmNvbXBvc2UgaW1wb3J0IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyXG5mcm9tIHNrbGVhcm4ucGlwZWxpbmUgaW1wb3J0IG1ha2VfcGlwZWxpbmVcbmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBTdGFuZGFyZFNjYWxlclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMaW5lYXJSZWdyZXNzaW9uXG5cbmxtID0gTGluZWFyUmVncmVzc2lvbigpXG5sbS5maXQoc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnXV0sIHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXSlcblxuc21hbGxfc2FjcmFtZW50b19wcmVkID0gc21hbGxfc2FjcmFtZW50b1xuIyBnZXQgcHJlZGljdGlvblxuc21hbGxfc2FjcmFtZW50b19wcmVkID0gc21hbGxfc2FjcmFtZW50b19wcmVkLmFzc2lnbihcbiAgICBwcmVkaWN0ZWQ9bG0ucHJlZGljdChzbWFsbF9zYWNyYW1lbnRvW1snc3FmdCddXSlcbilcbiMgbWVsdCB0aGUgZGF0YWZyYW1lIHRvIGNyZWF0ZSBzZXBhcmF0ZSBkZiB0byBjcmVhdGUgbGluZXNcbnNtYWxsX3NhY3JhbWVudG9fcHJlZCA9IHNtYWxsX3NhY3JhbWVudG9fcHJlZFtcbiAgICBbJ3NxZnQnLCAncHJpY2UnLCAncHJlZGljdGVkJ11cbl0ubWVsdChpZF92YXJzPVsnc3FmdCddKVxuXG52X2xpbmVzID0gW11cbmZvciBpIGluIHJhbmdlKGxlbihzbWFsbF9zYWNyYW1lbnRvKSk6XG4gICAgc3FmdF92YWwgPSBzbWFsbF9zYWNyYW1lbnRvLmlsb2NbaV1bJ3NxZnQnXVxuICAgIGxpbmVfZGYgPSBzbWFsbF9zYWNyYW1lbnRvX3ByZWQucXVlcnkoJ3NxZnQgPT0gQHNxZnRfdmFsJylcbiAgICB2X2xpbmVzLmFwcGVuZChcbiAgICAgICAgYWx0LkNoYXJ0KGxpbmVfZGYpLm1hcmtfbGluZShjb2xvcj0nYmxhY2snKS5lbmNvZGUoeD0nc3FmdCcsIHk9J3ZhbHVlJylcbiAgICApXG5cbmVycm9yX3Bsb3QgPSBhbHQubGF5ZXIoKnZfbGluZXMsIHNtYWxsX3Bsb3QpLmNvbmZpZ3VyZV9jaXJjbGUob3BhY2l0eT0xKVxuZXJyb3JfcGxvdCJ9
</script>
</div>
<blockquote>
<p>The residuals are the vertical distances of each point to the estimated line</p>
</blockquote>
</section>
<section id="sum-of-squared-errors" class="slide level2">
<h2>Sum of squared errors</h2>
<p>When estimating the regression equation, we minimize the sum of squared errors (SSE), defined as</p>
<p><span class="math display">\[SSE = \sum_{i=1}^n (y_i-\hat{y_i})^2=\sum_{i=1}^n r_i^2.\]</span></p>
</section>
<section id="linear-regression-in-python" class="slide level2">
<h2>Linear regression in Python</h2>
<p>The <code>scikit-learn</code> pattern still applies:</p>
<ul>
<li>Create a training and test set</li>
<li>Instantiate a model</li>
<li>Fit the model on training</li>
<li>Use model on testing set</li>
</ul>
</section>
<section id="linear-regression-train-test-split" class="slide level2">
<h2>Linear regression: Train test split</h2>
<div>
<div id="pyodide-18" class="exercise-cell">

</div>
<script type="pyodide-18-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiaW1wb3J0IG51bXB5IGFzIG5wXG5pbXBvcnQgYWx0YWlyIGFzIGFsdFxuaW1wb3J0IHBhbmRhcyBhcyBwZFxuZnJvbSBza2xlYXJuLm1vZGVsX3NlbGVjdGlvbiBpbXBvcnQgdHJhaW5fdGVzdF9zcGxpdFxuZnJvbSBza2xlYXJuLmxpbmVhcl9tb2RlbCBpbXBvcnQgTGluZWFyUmVncmVzc2lvblxuZnJvbSBza2xlYXJuLm1ldHJpY3MgaW1wb3J0IG1lYW5fc3F1YXJlZF9lcnJvclxuZnJvbSBza2xlYXJuIGltcG9ydCBzZXRfY29uZmlnXG5cbiMgT3V0cHV0IGRhdGFmcmFtZXMgaW5zdGVhZCBvZiBhcnJheXNcbnNldF9jb25maWcodHJhbnNmb3JtX291dHB1dD0ncGFuZGFzJylcblxubnAucmFuZG9tLnNlZWQoMSlcblxuc2FjcmFtZW50byA9IHBkLnJlYWRfY3N2KCdkYXRhL3NhY3JhbWVudG8uY3N2Jylcblxuc2FjcmFtZW50b190cmFpbiwgc2FjcmFtZW50b190ZXN0ID0gdHJhaW5fdGVzdF9zcGxpdChcbiAgICBzYWNyYW1lbnRvLCB0cmFpbl9zaXplPTAuNzVcbikifQ==
</script>
</div>
</section>
<section id="linear-regression-fit-the-model" class="slide level2">
<h2>Linear regression: Fit the model</h2>
<div>
<div id="pyodide-19" class="exercise-cell">

</div>
<script type="pyodide-19-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyBmaXQgdGhlIGxpbmVhciByZWdyZXNzaW9uIG1vZGVsXG5sbSA9IExpbmVhclJlZ3Jlc3Npb24oKVxubG0uZml0KFxuICAgIHNhY3JhbWVudG9fdHJhaW5bWydzcWZ0J11dLCAgIyBBIHNpbmdsZS1jb2x1bW4gZGF0YSBmcmFtZVxuICAgIHNhY3JhbWVudG9fdHJhaW5bJ3ByaWNlJ10sICAjIEEgc2VyaWVzXG4pXG5cbiMgbWFrZSBhIGRhdGFmcmFtZSBjb250YWluaW5nIHNsb3BlIGFuZCBpbnRlcmNlcHQgY29lZmZpY2llbnRzXG5yZXN1bHRzX2RmID0gcGQuRGF0YUZyYW1lKHsnc2xvcGUnOiBbbG0uY29lZl9bMF1dLCAnaW50ZXJjZXB0JzogW2xtLmludGVyY2VwdF9dfSlcbnByaW50KHJlc3VsdHNfZGYpIn0=
</script>
</div>
<!--TODO: numbers here are hard-coded -->
<p><span class="math inline">\(\text{house sale price} =\)</span> 137.29 <span class="math inline">\(+\)</span> 15642.31 <span class="math inline">\(\cdot (\text{house size}).\)</span></p>
</section>
<section id="linear-regression-predictions" class="slide level2">
<h2>Linear regression: Predictions</h2>
<div>
<div id="pyodide-20" class="exercise-cell">

</div>
<script type="pyodide-20-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyBtYWtlIHByZWRpY3Rpb25zXG5zYWNyYW1lbnRvX3Rlc3RbXCJwcmVkaWN0ZWRcIl0gPSBsbS5wcmVkaWN0KHNhY3JhbWVudG9fdGVzdFtbXCJzcWZ0XCJdXSlcblxuIyBjYWxjdWxhdGUgUk1TUEVcblJNU1BFID0gbWVhbl9zcXVhcmVkX2Vycm9yKFxuICAgIHlfdHJ1ZT1zYWNyYW1lbnRvX3Rlc3RbXCJwcmljZVwiXSxcbiAgICB5X3ByZWQ9c2FjcmFtZW50b190ZXN0W1wicHJlZGljdGVkXCJdXG4pKiooMS8yKVxuXG5STVNQRSJ9
</script>
</div>
</section>
<section id="linear-regression-plot" class="slide level2">
<h2>Linear regression: Plot</h2>
<div>
<div id="pyodide-21" class="exercise-cell">

</div>
<script type="pyodide-21-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IHRyYWluX3Rlc3Rfc3BsaXRcbmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExpbmVhclJlZ3Jlc3Npb25cbmZyb20gc2tsZWFybi5tZXRyaWNzIGltcG9ydCBtZWFuX3NxdWFyZWRfZXJyb3JcbmZyb20gc2tsZWFybiBpbXBvcnQgc2V0X2NvbmZpZ1xuXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMaW5lYXJSZWdyZXNzaW9uXG5cbmxtID0gTGluZWFyUmVncmVzc2lvbigpXG5sbS5maXQoc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnXV0sIHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXSlcblxuc3FmdF9wcmVkaWN0aW9uX2dyaWQgPSBzYWNyYW1lbnRvW1snc3FmdCddXS5hZ2coWydtaW4nLCAnbWF4J10pXG5zcWZ0X3ByZWRpY3Rpb25fZ3JpZFsncHJlZGljdGVkJ10gPSBsbS5wcmVkaWN0KHNxZnRfcHJlZGljdGlvbl9ncmlkKVxuXG5hbGxfcG9pbnRzID0gKFxuICAgIGFsdC5DaGFydChzYWNyYW1lbnRvKVxuICAgIC5tYXJrX2NpcmNsZSgpXG4gICAgLmVuY29kZShcbiAgICAgICAgeD1hbHQuWCgnc3FmdCcpLnNjYWxlKHplcm89RmFsc2UpLnRpdGxlKCdIb3VzZSBzaXplIChzcXVhcmUgZmVldCknKSxcbiAgICAgICAgeT1hbHQuWSgncHJpY2UnKVxuICAgICAgICAuYXhpcyhmb3JtYXQ9JyQsLjBmJylcbiAgICAgICAgLnNjYWxlKHplcm89RmFsc2UpXG4gICAgICAgIC50aXRsZSgnUHJpY2UgKFVTRCknKSxcbiAgICApXG4pXG5cbnNhY3JfcHJlZHNfcGxvdCA9IGFsbF9wb2ludHMgKyBhbHQuQ2hhcnQoc3FmdF9wcmVkaWN0aW9uX2dyaWQpLm1hcmtfbGluZShcbiAgICBjb2xvcj0nI2ZmN2YwZSdcbikuZW5jb2RlKHg9J3NxZnQnLCB5PSdwcmVkaWN0ZWQnKVxuXG5zYWNyX3ByZWRzX3Bsb3QifQ==
</script>
</div>
</section>
<section id="standarization" class="slide level2">
<h2>Standarization</h2>
<ul>
<li>We did not need to standarize like we did for KNN.</li>
<li>In linear regression, if we standarize, we convert all the units to unit-less standard deviations</li>
<li>Standarization in linear regression does not change the fit of the model
<ul>
<li>It will, however, change the coefficients!</li>
</ul></li>
</ul>
</section>
<section id="multiple-linear-regression" class="slide level2">
<h2>Multiple linear regression</h2>
<ul>
<li>More predictor variables! (More does not always mean better…)</li>
<li>When <span class="math inline">\(p\)</span>, the number of variables, is greater than 1, we have <em>multiple</em> linear regression.</li>
</ul>
<blockquote>
<p><em>Note: We will talk about categorical predictors later in the workshop</em></p>
</blockquote>
</section>
<section id="sacramento-real-estate-2-predictors" class="slide level2">
<h2>Sacramento real estate: 2 predictors</h2>
<div>
<div id="pyodide-22" class="exercise-cell">

</div>
<script type="pyodide-22-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoibWxtID0gTGluZWFyUmVncmVzc2lvbigpXG5tbG0uZml0KHNhY3JhbWVudG9fdHJhaW5bWydzcWZ0JywgJ2JlZHMnXV0sIHNhY3JhbWVudG9fdHJhaW5bJ3ByaWNlJ10pXG5cbnNhY3JhbWVudG9fdGVzdFsncHJlZGljdGVkJ10gPSBtbG0ucHJlZGljdChzYWNyYW1lbnRvX3Rlc3RbWydzcWZ0JywgJ2JlZHMnXV0pIn0=
</script>
</div>
</section>
<section id="sacramento-real-estate-coefficients" class="slide level2">
<h2>Sacramento real estate: Coefficients</h2>
<div>
<div id="pyodide-23" class="exercise-cell">

</div>
<script type="pyodide-23-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoibWxtLmNvZWZfIn0=
</script>
</div>
<div>
<div id="pyodide-24" class="exercise-cell">

</div>
<script type="pyodide-24-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoibWxtLmludGVyY2VwdF8ifQ==
</script>
</div>
<p><span class="math display">\[\text{house sale price} = 53180.27 + 154.59\cdot(\text{house size}) -20333.43\cdot(\text{bedrooms}),\]</span> where:</p>
<ul>
<li><p>Intercept (<span class="math inline">\(\hat{\beta}_0=53180.27\)</span>): Predicted sale price when house size = 0 and bedrooms = 0 (not meaningful in reality, but needed for the equation).</p></li>
<li><p>House size (<span class="math inline">\(\hat{\beta}_1=154.59\)</span>): Holding bedrooms constant, each extra unit of size (e.g., square foot) increases the price by $154.59 on average.</p></li>
<li><p>Number of bedrooms (<span class="math inline">\(\hat{\beta}_2=-20333.43\)</span>): Holding size constant, each additional bedroom reduces price by about $20,333.</p></li>
</ul>
</section>
<section id="more-variables-make-it-harder-to-visualize" class="slide level2">
<h2>More variables make it harder to visualize</h2>

<img data-src="img/regression/3d.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="sacramento-real-estate-mlm-rmspe" class="slide level2">
<h2>Sacramento real estate: mlm rmspe</h2>
<div>
<div id="pyodide-25" class="exercise-cell">

</div>
<script type="pyodide-25-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoibG1fbXVsdF90ZXN0X1JNU1BFID0gbWVhbl9zcXVhcmVkX2Vycm9yKFxuICAgIHlfdHJ1ZT1zYWNyYW1lbnRvX3Rlc3RbJ3ByaWNlJ10sIHlfcHJlZD1zYWNyYW1lbnRvX3Rlc3RbJ3ByZWRpY3RlZCddXG4pICoqICgxIC8gMilcblxubG1fbXVsdF90ZXN0X1JNU1BFIn0=
</script>
</div>
</section>
<section id="outliers-and-multicollinearity" class="slide level2">
<h2>Outliers and Multicollinearity</h2>
<ul>
<li>Outliers: extreme values that can move the best fit line</li>
<li>Multicollinearity: variables that are highly correlated to one another</li>
</ul>
</section>
<section id="outliers" class="slide level2">
<h2>Outliers</h2>
<div class="columns">
<div class="column">
<p>Subset</p>
<div>
<div id="pyodide-26" class="exercise-cell">

</div>
<script type="pyodide-26-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IHRyYWluX3Rlc3Rfc3BsaXRcbmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExpbmVhclJlZ3Jlc3Npb25cbmZyb20gc2tsZWFybi5tZXRyaWNzIGltcG9ydCBtZWFuX3NxdWFyZWRfZXJyb3JcbmZyb20gc2tsZWFybiBpbXBvcnQgc2V0X2NvbmZpZ1xuXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMaW5lYXJSZWdyZXNzaW9uXG5cbmxtID0gTGluZWFyUmVncmVzc2lvbigpXG5sbS5maXQoc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnXV0sIHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXSlcblxuc2FjcmFtZW50b190cmFpbl9zbWFsbCA9IHNhY3JhbWVudG9fdHJhaW4uc2FtcGxlKDEwMCwgcmFuZG9tX3N0YXRlPTIpXG5zYWNyYW1lbnRvX291dGxpZXIgPSBwZC5EYXRhRnJhbWUoeydzcWZ0JzogWzUwMDBdLCAncHJpY2UnOiBbNTAwMDBdfSlcbnNhY3JhbWVudG9fY29uY2F0X2RmID0gcGQuY29uY2F0KChzYWNyYW1lbnRvX3RyYWluX3NtYWxsLCBzYWNyYW1lbnRvX291dGxpZXIpKVxuXG5sbV9wbG90X291dGxpZXIgPSAoXG4gICAgYWx0LkNoYXJ0KHNhY3JhbWVudG9fdHJhaW5fc21hbGwpXG4gICAgLm1hcmtfY2lyY2xlKClcbiAgICAuZW5jb2RlKFxuICAgICAgICB4PWFsdC5YKFxuICAgICAgICAgICAgJ3NxZnQnLFxuICAgICAgICAgICAgdGl0bGU9J0hvdXNlIHNpemUgKHNxdWFyZSBmZWV0KScsXG4gICAgICAgICAgICBzY2FsZT1hbHQuU2NhbGUoemVybz1GYWxzZSksXG4gICAgICAgICksXG4gICAgICAgIHk9YWx0LlkoXG4gICAgICAgICAgICAncHJpY2UnLFxuICAgICAgICAgICAgdGl0bGU9J1ByaWNlIChVU0QpJyxcbiAgICAgICAgICAgIGF4aXM9YWx0LkF4aXMoZm9ybWF0PSckLC4wZicpLFxuICAgICAgICAgICAgc2NhbGU9YWx0LlNjYWxlKHplcm89RmFsc2UpLFxuICAgICAgICApLFxuICAgIClcbilcbmxtX3Bsb3Rfb3V0bGllciArPSBsbV9wbG90X291dGxpZXIudHJhbnNmb3JtX3JlZ3Jlc3Npb24oXG4gICAgJ3NxZnQnLCAncHJpY2UnXG4pLm1hcmtfbGluZShjb2xvcj0nI2ZmN2YwZScpXG5cbm91dGxpZXJfcHQgPSAoXG4gICAgYWx0LkNoYXJ0KHNhY3JhbWVudG9fb3V0bGllcilcbiAgICAubWFya19jaXJjbGUoY29sb3I9JyNkNjI3MjgnLCBzaXplPTEwMClcbiAgICAuZW5jb2RlKHg9J3NxZnQnLCB5PSdwcmljZScpXG4pXG5cbm91dGxpZXJfbGluZSA9IChcbiAgICAoXG4gICAgICAgIGFsdC5DaGFydChzYWNyYW1lbnRvX2NvbmNhdF9kZilcbiAgICAgICAgLm1hcmtfY2lyY2xlKClcbiAgICAgICAgLmVuY29kZShcbiAgICAgICAgICAgIHg9YWx0LlgoXG4gICAgICAgICAgICAgICAgJ3NxZnQnLFxuICAgICAgICAgICAgICAgIHRpdGxlPSdIb3VzZSBzaXplIChzcXVhcmUgZmVldCknLFxuICAgICAgICAgICAgICAgIHNjYWxlPWFsdC5TY2FsZSh6ZXJvPUZhbHNlKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB5PWFsdC5ZKFxuICAgICAgICAgICAgICAgICdwcmljZScsXG4gICAgICAgICAgICAgICAgdGl0bGU9J1ByaWNlIChVU0QpJyxcbiAgICAgICAgICAgICAgICBheGlzPWFsdC5BeGlzKGZvcm1hdD0nJCwuMGYnKSxcbiAgICAgICAgICAgICAgICBzY2FsZT1hbHQuU2NhbGUoemVybz1GYWxzZSksXG4gICAgICAgICAgICApLFxuICAgICAgICApXG4gICAgKVxuICAgIC50cmFuc2Zvcm1fcmVncmVzc2lvbignc3FmdCcsICdwcmljZScpXG4gICAgLm1hcmtfbGluZShjb2xvcj0nI2Q2MjcyOCcpXG4pXG5cbmxtX3Bsb3Rfb3V0bGllciArPSBvdXRsaWVyX3B0ICsgb3V0bGllcl9saW5lXG5cbmxtX3Bsb3Rfb3V0bGllciJ9
</script>
</div>
</div><div class="column">
<p>Full data</p>
<div>
<div id="pyodide-27" class="exercise-cell">

</div>
<script type="pyodide-27-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IHRyYWluX3Rlc3Rfc3BsaXRcbmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExpbmVhclJlZ3Jlc3Npb25cbmZyb20gc2tsZWFybi5tZXRyaWNzIGltcG9ydCBtZWFuX3NxdWFyZWRfZXJyb3JcbmZyb20gc2tsZWFybiBpbXBvcnQgc2V0X2NvbmZpZ1xuXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMaW5lYXJSZWdyZXNzaW9uXG5cbmxtID0gTGluZWFyUmVncmVzc2lvbigpXG5sbS5maXQoc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnXV0sIHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXSlcblxuIyBPdXRwdXQgZGF0YWZyYW1lcyBpbnN0ZWFkIG9mIGFycmF5c1xuc2V0X2NvbmZpZyh0cmFuc2Zvcm1fb3V0cHV0PSdwYW5kYXMnKVxuXG5ucC5yYW5kb20uc2VlZCgxKVxuXG5zYWNyYW1lbnRvID0gcGQucmVhZF9jc3YoJ2RhdGEvc2FjcmFtZW50by5jc3YnKVxuXG5zYWNyYW1lbnRvX3RyYWluLCBzYWNyYW1lbnRvX3Rlc3QgPSB0cmFpbl90ZXN0X3NwbGl0KFxuICAgIHNhY3JhbWVudG8sIHRyYWluX3NpemU9MC43NVxuKVxuXG5zYWNyYW1lbnRvX2NvbmNhdF9kZiA9IHBkLmNvbmNhdCgoc2FjcmFtZW50b190cmFpbiwgc2FjcmFtZW50b19vdXRsaWVyKSlcblxubG1fcGxvdF9vdXRsaWVyX2xhcmdlID0gKFxuICAgIGFsdC5DaGFydChzYWNyYW1lbnRvX3RyYWluKVxuICAgIC5tYXJrX2NpcmNsZSgpXG4gICAgLmVuY29kZShcbiAgICAgICAgeD1hbHQuWChcInNxZnRcIiwgdGl0bGU9XCJIb3VzZSBzaXplIChzcXVhcmUgZmVldClcIiwgc2NhbGU9YWx0LlNjYWxlKHplcm89RmFsc2UpKSxcbiAgICAgICAgeT1hbHQuWShcbiAgICAgICAgICAgIFwicHJpY2VcIixcbiAgICAgICAgICAgIHRpdGxlPVwiUHJpY2UgKFVTRClcIixcbiAgICAgICAgICAgIGF4aXM9YWx0LkF4aXMoZm9ybWF0PVwiJCwuMGZcIiksXG4gICAgICAgICAgICBzY2FsZT1hbHQuU2NhbGUoemVybz1GYWxzZSksXG4gICAgICAgICksXG4gICAgKVxuKVxubG1fcGxvdF9vdXRsaWVyX2xhcmdlICs9IGxtX3Bsb3Rfb3V0bGllcl9sYXJnZS50cmFuc2Zvcm1fcmVncmVzc2lvbihcbiAgICBcInNxZnRcIiwgXCJwcmljZVwiXG4pLm1hcmtfbGluZShjb2xvcj1cIiNmZjdmMGVcIilcblxub3V0bGllcl9saW5lID0gKFxuICAgIChcbiAgICAgICAgYWx0LkNoYXJ0KHNhY3JhbWVudG9fY29uY2F0X2RmKVxuICAgICAgICAubWFya19jaXJjbGUoKVxuICAgICAgICAuZW5jb2RlKFxuICAgICAgICAgICAgeD1hbHQuWChcbiAgICAgICAgICAgICAgICBcInNxZnRcIiwgdGl0bGU9XCJIb3VzZSBzaXplIChzcXVhcmUgZmVldClcIiwgc2NhbGU9YWx0LlNjYWxlKHplcm89RmFsc2UpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgeT1hbHQuWShcbiAgICAgICAgICAgICAgICBcInByaWNlXCIsXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJQcmljZSAoVVNEKVwiLFxuICAgICAgICAgICAgICAgIGF4aXM9YWx0LkF4aXMoZm9ybWF0PVwiJCwuMGZcIiksXG4gICAgICAgICAgICAgICAgc2NhbGU9YWx0LlNjYWxlKHplcm89RmFsc2UpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgIClcbiAgICAudHJhbnNmb3JtX3JlZ3Jlc3Npb24oXCJzcWZ0XCIsIFwicHJpY2VcIilcbiAgICAubWFya19saW5lKGNvbG9yPVwiI2Q2MjcyOFwiKVxuKVxuXG5sbV9wbG90X291dGxpZXJfbGFyZ2UgKz0gb3V0bGllcl9wdCArIG91dGxpZXJfbGluZVxuXG5sbV9wbG90X291dGxpZXJfbGFyZ2UifQ==
</script>
</div>
</div></div>
</section>
<section id="multicollinearity" class="slide level2">
<h2>Multicollinearity</h2>
<ul>
<li><p>Multicollinearity means that some (or all) of the <em>explanatory</em> variables are linearly related!</p></li>
<li><p>When this happens, the coefficient estimates are very “unstable” and the contribution of one variable gets mixed with that of another variable correlated with it.</p></li>
<li><p>Essentially, the plane of best fit has regression coefficients that are very sensitive to the exact values in the data.</p></li>
</ul>
<div>
<div id="pyodide-28" class="exercise-cell">

</div>
<script type="pyodide-28-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwiZmlnLWhlaWdodCI6NCwiZmlnLXdpZHRoIjo3fSwiY29kZSI6ImltcG9ydCBhbHRhaXIgYXMgYWx0XG5pbXBvcnQgbnVtcHkgYXMgbnBcbmltcG9ydCBwYW5kYXMgYXMgcGRcbmZyb20gc2tsZWFybi5tb2RlbF9zZWxlY3Rpb24gaW1wb3J0IHRyYWluX3Rlc3Rfc3BsaXRcbmZyb20gc2tsZWFybi5saW5lYXJfbW9kZWwgaW1wb3J0IExpbmVhclJlZ3Jlc3Npb25cbmZyb20gc2tsZWFybi5tZXRyaWNzIGltcG9ydCBtZWFuX3NxdWFyZWRfZXJyb3JcbmZyb20gc2tsZWFybiBpbXBvcnQgc2V0X2NvbmZpZ1xuXG5cbnNhY3JhbWVudG8gPSBwZC5yZWFkX2NzdignZGF0YS9zYWNyYW1lbnRvLmNzdicpXG5cbm5wLnJhbmRvbS5zZWVkKDQyKVxuc21hbGxfc2FjcmFtZW50byA9IHNhY3JhbWVudG8uc2FtcGxlKG49MzApXG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMaW5lYXJSZWdyZXNzaW9uXG5cbmxtID0gTGluZWFyUmVncmVzc2lvbigpXG5sbS5maXQoc21hbGxfc2FjcmFtZW50b1tbJ3NxZnQnXV0sIHNtYWxsX3NhY3JhbWVudG9bWydwcmljZSddXSlcblxuIyBPdXRwdXQgZGF0YWZyYW1lcyBpbnN0ZWFkIG9mIGFycmF5c1xuc2V0X2NvbmZpZyh0cmFuc2Zvcm1fb3V0cHV0PSdwYW5kYXMnKVxuXG5ucC5yYW5kb20uc2VlZCgxKVxuXG5zYWNyYW1lbnRvID0gcGQucmVhZF9jc3YoJ2RhdGEvc2FjcmFtZW50by5jc3YnKVxuXG5zYWNyYW1lbnRvX3RyYWluLCBzYWNyYW1lbnRvX3Rlc3QgPSB0cmFpbl90ZXN0X3NwbGl0KFxuICAgIHNhY3JhbWVudG8sIHRyYWluX3NpemU9MC43NVxuKVxuXG5ucC5yYW5kb20uc2VlZCgxKVxuc2FjcmFtZW50b190cmFpbiA9IHNhY3JhbWVudG9fdHJhaW4uYXNzaWduKFxuICAgIHNxZnQxPXNhY3JhbWVudG9fdHJhaW5bJ3NxZnQnXVxuICAgICsgMTAwXG4gICAgKiBucC5yYW5kb20uY2hvaWNlKFxuICAgICAgICByYW5nZSgxMDAwMDAwKSwgc2l6ZT1sZW4oc2FjcmFtZW50b190cmFpbiksIHJlcGxhY2U9VHJ1ZVxuICAgIClcbiAgICAvIDEwMDAwMDBcbilcbnNhY3JhbWVudG9fdHJhaW4gPSBzYWNyYW1lbnRvX3RyYWluLmFzc2lnbihcbiAgICBzcWZ0Mj1zYWNyYW1lbnRvX3RyYWluWydzcWZ0J11cbiAgICArIDEwMFxuICAgICogbnAucmFuZG9tLmNob2ljZShcbiAgICAgICAgcmFuZ2UoMTAwMDAwMCksIHNpemU9bGVuKHNhY3JhbWVudG9fdHJhaW4pLCByZXBsYWNlPVRydWVcbiAgICApXG4gICAgLyAxMDAwMDAwXG4pXG5zYWNyYW1lbnRvX3RyYWluID0gc2FjcmFtZW50b190cmFpbi5hc3NpZ24oXG4gICAgc3FmdDM9c2FjcmFtZW50b190cmFpblsnc3FmdCddXG4gICAgKyAxMDBcbiAgICAqIG5wLnJhbmRvbS5jaG9pY2UoXG4gICAgICAgIHJhbmdlKDEwMDAwMDApLCBzaXplPWxlbihzYWNyYW1lbnRvX3RyYWluKSwgcmVwbGFjZT1UcnVlXG4gICAgKVxuICAgIC8gMTAwMDAwMFxuKVxuc2FjcmFtZW50b190cmFpblxuXG5sbV9wbG90X211bHRpY29sXzEgPSAoXG4gICAgYWx0LkNoYXJ0KHNhY3JhbWVudG9fdHJhaW4pXG4gICAgLm1hcmtfY2lyY2xlKClcbiAgICAuZW5jb2RlKFxuICAgICAgICB4PWFsdC5YKCdzcWZ0JywgdGl0bGU9J0hvdXNlIHNpemUgbWVhc3VyZW1lbnQgMSAoc3F1YXJlIGZlZXQpJyksXG4gICAgICAgIHk9YWx0LlkoJ3NxZnQxJywgdGl0bGU9J0hvdXNlIHNpemUgbWVhc3VyZW1lbnQgMiAoc3F1YXJlIGZlZXQpJyksXG4gICAgKVxuKVxuXG5sbV9wbG90X211bHRpY29sXzEifQ==
</script>
</div>
</section>
<section id="feature-selection" class="slide level2">
<h2>Feature selection</h2>
<ul>
<li>In modern datasets, we often have many features (sometimes more than the number of observations).</li>
<li>Not all features are informative or relevant.</li>
<li>Including irrelevant predictors can lead to:
<ul>
<li>Overfitting</li>
<li>Multicollinearity</li>
<li>Poor generalization to new data</li>
</ul></li>
<li>We need methods that can automatically select features while fitting the model…</li>
</ul>
</section>
<section id="l1-regularization" class="slide level2">
<h2>L1-regularization</h2>
<ul>
<li>L1-regularization, often referred to as LASSO (Least Absolute Shrinkage and Selection Operator), adds an L1 penalty to the least squares loss:</li>
</ul>
<p><span class="math display">\[
\hat{\boldsymbol{\beta}} = \arg\min_{\boldsymbol{\beta}} \left\{
\sum_{i=1}^n (y_i - \mathbf{x}_i^\top \boldsymbol{\beta})^2 + \lambda \sum_{j=1}^p |\beta_j|
\right\}
\]</span></p>
<ul>
<li><span class="math inline">\(\lambda \geq 0\)</span> is a tuning parameter that controls the strength of the penalty</li>
<li>With the L1 penalty, many coefficients get set equal to zero.</li>
<li>Thus, LASSO performs variable selection <em>and</em> regularization.</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Standardization is necessary in penalized regression because penalty terms are scale-sensitive.</p>
</div>
</div>
</div>
</section>
<section id="l1-regularization-in-scikit-learn" class="slide level2">
<h2>L1-regularization in <code>scikit-learn</code></h2>
<div>
<div id="pyodide-29" class="exercise-cell">

</div>
<script type="pyodide-29-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiXG5mcm9tIHNrbGVhcm4ubGluZWFyX21vZGVsIGltcG9ydCBMYXNzb1xuXG4jIEV4YW1wbGU6IFVzZSBvbmx5IG51bWVyaWMgY29sdW1ucyBmb3IgWCBcbmZlYXR1cmVzID0gWydiZWRzJywgJ2JhdGhzJywgJ3NxZnQnXVxuXG5YID0gc2FjcmFtZW50b190cmFpbltmZWF0dXJlc11cbnkgPSBzYWNyYW1lbnRvX3RyYWluWydwcmljZSddXG5cblhfdHJhaW4sIFhfdGVzdCwgeV90cmFpbiwgeV90ZXN0ID0gdHJhaW5fdGVzdF9zcGxpdChYLCB5LCB0ZXN0X3NpemU9MC4yLCByYW5kb21fc3RhdGU9MjAyNSlcblxuc2Fjcl9wcmVwcm9jZXNzb3IgPSBtYWtlX2NvbHVtbl90cmFuc2Zvcm1lcihcbiAgICAoU3RhbmRhcmRTY2FsZXIoKSwgZmVhdHVyZXMpLFxuICAgIHJlbWFpbmRlcj0gJ2Ryb3AnXG4pXG5cbnNhY3JfcGlwZWxpbmUgPSBtYWtlX3BpcGVsaW5lKFxuICAgIHNhY3JfcHJlcHJvY2Vzc29yLFxuICAgIExhc3NvKGFscGhhPTIwMDAuMCwgbWF4X2l0ZXI9MTAwMDApICMgZml4aW5nIGFscGhhIGZvciBub3dcbilcblxuIyBGaXQgdGhlIHBpcGVsaW5lIG9uIHRyYWluaW5nIGRhdGFcbnNhY3JfcGlwZWxpbmUuZml0KFhfdHJhaW4sIHlfdHJhaW4pXG5cbmxhc3NvX21vZGVsID0gc2Fjcl9waXBlbGluZS5uYW1lZF9zdGVwc1snbGFzc28nXVxuXG5jb2VmcyA9IGxhc3NvX21vZGVsLmNvZWZfXG5cbiMgQ291bnQgbm9uLXplcm8gY29lZmZpY2llbnRzXG5udW1fc2VsZWN0ZWQgPSBucC5zdW0oY29lZnMgIT0gMClcbnByaW50KGZcIk51bWJlciBvZiBmZWF0dXJlcyBzZWxlY3RlZCBieSBMYXNzbzoge251bV9zZWxlY3RlZH1cIilcblxuIyBMaXN0IHNlbGVjdGVkIGZlYXR1cmVzXG5zZWxlY3RlZF9mZWF0dXJlcyA9IFtmZWF0dXJlIGZvciBmZWF0dXJlLCBjb2VmIGluIHppcChmZWF0dXJlcywgY29lZnMpIGlmIGNvZWYgIT0gMF1cbnByaW50KFwiU2VsZWN0ZWQgZmVhdHVyZXM6XCIsIHNlbGVjdGVkX2ZlYXR1cmVzKSJ9
</script>
</div>
</section>
<section id="choosing-the-shrinkage-parameter" class="slide level2">
<h2>Choosing the shrinkage parameter</h2>
<ul>
<li>The <span class="math inline">\(\alpha\)</span> parameter controls the strength of the L1 penalty:
<ul>
<li>Larger <span class="math inline">\(\alpha\)</span> → stronger regularization → more coefficients shrunk to zero</li>
<li>Smaller <span class="math inline">\(\alpha\)</span> → less regularization → more complex model</li>
</ul></li>
<li>Proper selection of <span class="math inline">\(\alpha\)</span> is critical for balancing <strong>bias</strong> and <strong>variance</strong>.</li>
</ul>
</section>
<section id="tuning-alpha-with-cross-validation" class="slide level2">
<h2>Tuning <span class="math inline">\(\alpha\)</span> with cross-validation</h2>
<ul>
<li><p>Just like tuning <span class="math inline">\(k\)</span> in KNN, we can select <span class="math inline">\(\alpha\)</span> by evaluating performance on validation sets.</p></li>
<li><p>Example workflow with <strong>GridSearchCV</strong>:</p></li>
</ul>
<div>
<div id="pyodide-30" class="exercise-cell">

</div>
<script type="pyodide-30-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoicGlwZWxpbmUgPSBtYWtlX3BpcGVsaW5lKFxuICAgIHNhY3JfcHJlcHJvY2Vzc29yLFxuICAgIExhc3NvKG1heF9pdGVyPTEwMDAwKVxuKVxuXG5wYXJhbV9ncmlkID0ge1xuICAgICdsYXNzb19fYWxwaGEnOiBucC5hcmFuZ2UoMSwgMzAwMCwgMTAuMClcbn1cblxuZ3JpZF9zZWFyY2ggPSBHcmlkU2VhcmNoQ1YoXG4gICAgZXN0aW1hdG9yPXBpcGVsaW5lLFxuICAgIHBhcmFtX2dyaWQ9cGFyYW1fZ3JpZCxcbiAgICBjdj01LFxuICAgIHNjb3Jpbmc9J25lZ19yb290X21lYW5fc3F1YXJlZF9lcnJvcidcbilcblxuZ3JpZF9zZWFyY2guZml0KFhfdHJhaW4sIHlfdHJhaW4pXG5cbnByaW50KFwiQmVzdCBhbHBoYTpcIiwgZ3JpZF9zZWFyY2guYmVzdF9wYXJhbXNfWydsYXNzb19fYWxwaGEnXSlcbnByaW50KFwiQ29lZmZpY2llbnRzOlwiLCBjb2VmcykifQ==
</script>
</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div>
<div id="pyodide-31" class="exercise-cell">

</div>
<script type="pyodide-31-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiYmVzdF9tb2RlbCA9IGdyaWRfc2VhcmNoLmJlc3RfZXN0aW1hdG9yX1xuXG4jIFByZWRpY3Qgb24gdGVzdCBzZXRcbnlfcHJlZCA9IGJlc3RfbW9kZWwucHJlZGljdChYX3Rlc3QpXG5cbiMgU2hvdyBmaXJzdCA1IHByZWRpY3Rpb25zXG5wcmludChcIkZpcnN0IDUgcHJlZGljdGlvbnM6XCIsIHlfcHJlZFs6NV0pXG5cbiMgRXZhbHVhdGUgbW9kZWxcbm1zZSA9IG1lYW5fc3F1YXJlZF9lcnJvcih5X3Rlc3QsIHlfcHJlZClcbnJtc2UgPSBtc2UgKiogKDEvMilcblxucHJpbnQoZlwiVGVzdCBSTVNFOiB7cm1zZTouMmZ9XCIpIn0=
</script>
</div>
</section>
<section id="clicker-questions" class="slide level2">
<h2>Clicker questions</h2>
<ul>
<li><p><a href="https://www.menti.com/algmf2xzfs8g">https://www.menti.com/algmf2xzfs8g9</a></p></li>
<li><p>Alternatively, go to <a href="menti.com">menti.com</a> and use code 1668 5101</p></li>
</ul>
</section>
<section id="additional-resources" class="slide level2">
<h2>Additional Resources</h2>
<ul>
<li>The <a href="https://python.datasciencebook.ca/regression1.html">Regression I: K-nearest neighbors</a> and <a href="https://python.datasciencebook.ca/regression2.html">Regression II: linear regression</a> chapters of Data Science: A First Introduction (Python Edition) by Tiffany Timbers, Trevor Campbell, Melissa Lee, Joel Ostblom, Lindsey Heagy contains all the content presented here with a detailed narrative.</li>
<li>The <a href="https://scikit-learn.org/stable/"><code>scikit-learn</code> website</a> is an excellent reference for more details on, and advanced usage of, the functions and packages in this lesson. Aside from that, it also offers many useful <a href="https://scikit-learn.org/stable/tutorial/index.html">tutorials</a> to get you started.</li>
<li><a href="https://www.statlearning.com/"><em>An Introduction to Statistical Learning</em></a> by Gareth James Daniela Witten Trevor Hastie, and Robert Tibshirani provides a great next stop in the process of learning about classification. Chapter 3 discusses lienar regression in more depth. As well as how it comares to K-nearest neighbors.</li>
</ul>
</section>
<section id="references" class="slide level2">
<h2>References</h2>
<p>Thomas Cover and Peter Hart. Nearest neighbor pattern classification. IEEE Transactions on Information Theory, 13(1):21–27, 1967.</p>
<p>Evelyn Fix and Joseph Hodges. Discriminatory analysis. nonparametric discrimination: consistency properties. Technical Report, USAF School of Aviation Medicine, Randolph Field, Texas, 1951.</p>
</section>
<section id="code-for-cv-in-k-nn-regression" class="slide level2">
<h2>Code for CV in K-NN regression</h2>
<div>
<div id="pyodide-32" class="exercise-cell">

</div>
<script type="pyodide-32-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiZnJvbSBza2xlYXJuLm5laWdoYm9ycyBpbXBvcnQgS05laWdoYm9yc1JlZ3Jlc3NvclxuXG4jIHByZXByb2Nlc3MgdGhlIGRhdGEsIG1ha2UgdGhlIHBpcGVsaW5lXG5zYWNyX3ByZXByb2Nlc3NvciA9IG1ha2VfY29sdW1uX3RyYW5zZm9ybWVyKChTdGFuZGFyZFNjYWxlcigpLCBbJ3NxZnQnXSkpXG5zYWNyX3BpcGVsaW5lID0gbWFrZV9waXBlbGluZShzYWNyX3ByZXByb2Nlc3NvciwgS05laWdoYm9yc1JlZ3Jlc3NvcigpKVxuXG4jIGNyZWF0ZSB0aGUgNS1mb2xkIEdyaWRTZWFyY2hDViBvYmplY3RcbnBhcmFtX2dyaWQgPSB7XG4gICAgJ2tuZWlnaGJvcnNyZWdyZXNzb3JfX25fbmVpZ2hib3JzJzogcmFuZ2UoMSwgMjAxLCAzKSxcbn1cbnNhY3JfZ3JpZHNlYXJjaCA9IEdyaWRTZWFyY2hDVihcbiAgICBlc3RpbWF0b3I9c2Fjcl9waXBlbGluZSxcbiAgICBwYXJhbV9ncmlkPXBhcmFtX2dyaWQsXG4gICAgY3Y9NSxcbiAgICBzY29yaW5nPSduZWdfcm9vdF9tZWFuX3NxdWFyZWRfZXJyb3InXG4pXG5cbiMgZml0IHRoZSBHcmlkU2VhcmNoQ1Ygb2JqZWN0XG5zYWNyX2dyaWRzZWFyY2guZml0KFxuICAgIHNhY3JhbWVudG9fdHJhaW5bWydzcWZ0J11dLCAgXG4gICAgc2FjcmFtZW50b190cmFpblsncHJpY2UnXVxuKVxuXG5zYWNyX2dyaWRzZWFyY2guYmVzdF9wYXJhbXNfXG5cbiMgUmV0cmlldmUgdGhlIENWIHNjb3Jlc1xuc2Fjcl9yZXN1bHRzID0gcGQuRGF0YUZyYW1lKHNhY3JfZ3JpZHNlYXJjaC5jdl9yZXN1bHRzXylcbnNhY3JfcmVzdWx0cyA9IHNhY3JfcmVzdWx0c1tcbiAgICBbXG4gICAgICAgICdwYXJhbV9rbmVpZ2hib3JzcmVncmVzc29yX19uX25laWdoYm9ycycsXG4gICAgICAgICdtZWFuX3Rlc3Rfc2NvcmUnXG4gICAgXVxuXS5yZW5hbWUoY29sdW1ucz17J3BhcmFtX2tuZWlnaGJvcnNyZWdyZXNzb3JfX25fbmVpZ2hib3JzJzogJ25fbmVpZ2hib3JzJ30pXG5cblxuYmVzdF9rX3NhY3IgPSBzYWNyX3Jlc3VsdHNbXCJuX25laWdoYm9yc1wiXVtzYWNyX3Jlc3VsdHNbXCJtZWFuX3Rlc3Rfc2NvcmVcIl0uaWR4bWluKCldXG5iZXN0X2N2X1JNU1BFID0gbWluKHNhY3JfcmVzdWx0c1tcIm1lYW5fdGVzdF9zY29yZVwiXSkifQ==
</script>
</div>
</section>
<section id="multivariable-k-nn-regression-preprocessor" class="slide level2">
<h2>Multivariable K-NN regression: Preprocessor</h2>
<div>
<div id="pyodide-33" class="exercise-cell">

</div>
<script type="pyodide-33-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoic2Fjcl9wcmVwcm9jZXNzb3IgPSBtYWtlX2NvbHVtbl90cmFuc2Zvcm1lcihcbiAgICAoU3RhbmRhcmRTY2FsZXIoKSwgWydzcWZ0JywgJ2JlZHMnXSlcbilcbnNhY3JfcGlwZWxpbmUgPSBtYWtlX3BpcGVsaW5lKHNhY3JfcHJlcHJvY2Vzc29yLCBLTmVpZ2hib3JzUmVncmVzc29yKCkpIn0=
</script>
</div>
</section>
<section id="multivariable-k-nn-regression-cv" class="slide level2">
<h2>Multivariable K-NN regression: CV</h2>
<div>
<div id="pyodide-34" class="exercise-cell">

</div>
<script type="pyodide-34-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyBjcmVhdGUgdGhlIDUtZm9sZCBHcmlkU2VhcmNoQ1Ygb2JqZWN0XG5wYXJhbV9ncmlkID0ge1xuICAgICdrbmVpZ2hib3JzcmVncmVzc29yX19uX25laWdoYm9ycyc6IHJhbmdlKDEsIDUwKSxcbn1cblxuc2Fjcl9ncmlkc2VhcmNoID0gR3JpZFNlYXJjaENWKFxuICAgIGVzdGltYXRvcj1zYWNyX3BpcGVsaW5lLFxuICAgIHBhcmFtX2dyaWQ9cGFyYW1fZ3JpZCxcbiAgICBjdj01LFxuICAgIHNjb3Jpbmc9J25lZ19yb290X21lYW5fc3F1YXJlZF9lcnJvcicsXG4pXG5cbnNhY3JfZ3JpZHNlYXJjaC5maXQoXG4gICAgc2FjcmFtZW50b190cmFpbltbJ3NxZnQnLCAnYmVkcyddXSwgc2FjcmFtZW50b190cmFpblsncHJpY2UnXVxuKSJ9
</script>
</div>
</section>
<section id="multivariable-k-nn-regression-best-k" class="slide level2">
<h2>Multivariable K-NN regression: Best K</h2>
<div>
<div id="pyodide-35" class="exercise-cell">

</div>
<script type="pyodide-35-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyByZXRyaWV2ZSB0aGUgQ1Ygc2NvcmVzXG5zYWNyX3Jlc3VsdHMgPSBwZC5EYXRhRnJhbWUoc2Fjcl9ncmlkc2VhcmNoLmN2X3Jlc3VsdHNfKVxuc2Fjcl9yZXN1bHRzWydtZWFuX3Rlc3Rfc2NvcmUnXSA9IC1zYWNyX3Jlc3VsdHNbJ21lYW5fdGVzdF9zY29yZSddXG5zYWNyX3Jlc3VsdHMgPSBzYWNyX3Jlc3VsdHNbXG4gICAgW1xuICAgICAgICAncGFyYW1fa25laWdoYm9yc3JlZ3Jlc3Nvcl9fbl9uZWlnaGJvcnMnLFxuICAgICAgICAnbWVhbl90ZXN0X3Njb3JlJ1xuICAgIF1cbl0ucmVuYW1lKGNvbHVtbnM9eydwYXJhbV9rbmVpZ2hib3JzcmVncmVzc29yX19uX25laWdoYm9ycyc6ICduX25laWdoYm9ycyd9KVxuXG4jIHNob3cgb25seSB0aGUgcm93IG9mIG1pbmltdW0gUk1TUEVcbnNhY3JfcmVzdWx0cy5uc21hbGxlc3QoMSwgJ21lYW5fdGVzdF9zY29yZScpIn0=
</script>
</div>
</section>
<section id="multivariable-k-nn-regression-best-model" class="slide level2">
<h2>Multivariable K-NN regression: Best model</h2>
<div>
<div id="pyodide-36" class="exercise-cell">

</div>
<script type="pyodide-36-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiYmVzdF9rX3NhY3JfbXVsdGkgPSBzYWNyX3Jlc3VsdHNbXCJuX25laWdoYm9yc1wiXVtzYWNyX3Jlc3VsdHNbXCJtZWFuX3Rlc3Rfc2NvcmVcIl0uaWR4bWluKCldXG5taW5fcm1zcGVfc2Fjcl9tdWx0aSA9IG1pbihzYWNyX3Jlc3VsdHNbXCJtZWFuX3Rlc3Rfc2NvcmVcIl0pIn0=
</script>
</div>
<p>Best K</p>
<div>
<div id="pyodide-37" class="exercise-cell">

</div>
<script type="pyodide-37-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiYmVzdF9rX3NhY3JfbXVsdGkifQ==
</script>
</div>
<p>Best RMSPE</p>
<div>
<div id="pyodide-38" class="exercise-cell">

</div>
<script type="pyodide-38-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoibWluX3Jtc3BlX3NhY3JfbXVsdGkifQ==
</script>
</div>
</section>
<section id="multivariable-k-nn-regression-test-data" class="slide level2">
<h2>Multivariable K-NN regression: Test data</h2>
<div>
<div id="pyodide-39" class="exercise-cell">

</div>
<script type="pyodide-39-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoic2FjcmFtZW50b190ZXN0W1wicHJlZGljdGVkXCJdID0gc2Fjcl9ncmlkc2VhcmNoLnByZWRpY3Qoc2FjcmFtZW50b190ZXN0KVxuUk1TUEVfbXVsdCA9IG1lYW5fc3F1YXJlZF9lcnJvcihcbiAgICB5X3RydWU9c2FjcmFtZW50b190ZXN0W1wicHJpY2VcIl0sXG4gICAgeV9wcmVkPXNhY3JhbWVudG9fdGVzdFtcInByZWRpY3RlZFwiXVxuKSoqKDEvMilcblxuUk1TUEVfbXVsdCJ9
</script>
</div>
</section>
<section id="multivariable-k-nn-regression-visualize" class="slide level2">
<h2>Multivariable K-NN regression: Visualize</h2>
<div>
<div id="pyodide-40" class="exercise-cell">

</div>
<script type="pyodide-40-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyB8IGVjaG86IGZhbHNlXG5cbiMgY3JlYXRlIGEgcHJlZGljdGlvbiBwdCBncmlkXG54dmFscyA9IG5wLmxpbnNwYWNlKFxuICAgIHNhY3JhbWVudG9fdHJhaW5bJ3NxZnQnXS5taW4oKSwgc2FjcmFtZW50b190cmFpblsnc3FmdCddLm1heCgpLCA1MFxuKVxueXZhbHMgPSBucC5saW5zcGFjZShcbiAgICBzYWNyYW1lbnRvX3RyYWluWydiZWRzJ10ubWluKCksIHNhY3JhbWVudG9fdHJhaW5bJ2JlZHMnXS5tYXgoKSwgNTBcbilcbnh5Z3JpZCA9IG5wLmFycmF5KG5wLm1lc2hncmlkKHh2YWxzLCB5dmFscykpLnJlc2hhcGUoMiwgLTEpLlRcbnh5Z3JpZCA9IHBkLkRhdGFGcmFtZSh4eWdyaWQsIGNvbHVtbnM9WydzcWZ0JywgJ2JlZHMnXSlcblxuIyBhZGQgcHJlZGljdGlvblxua25uUHJlZEdyaWQgPSBzYWNyX2dyaWRzZWFyY2gucHJlZGljdCh4eWdyaWQpXG5cbmZpZyA9IHB4LnNjYXR0ZXJfM2QoXG4gICAgc2FjcmFtZW50b190cmFpbixcbiAgICB4PSdzcWZ0JyxcbiAgICB5PSdiZWRzJyxcbiAgICB6PSdwcmljZScsXG4gICAgb3BhY2l0eT0wLjQsXG4gICAgbGFiZWxzPXtcbiAgICAgICAgJ3NxZnQnOiAnU2l6ZSAoc3EgZnQpJyxcbiAgICAgICAgJ2JlZHMnOiAnQmVkcm9vbXMnLFxuICAgICAgICAncHJpY2UnOiAnUHJpY2UgKFVTRCknLFxuICAgIH0sXG4pXG5cbmZpZy51cGRhdGVfdHJhY2VzKG1hcmtlcj17J3NpemUnOiAyLCAnY29sb3InOiAncmVkJ30pXG5cbmZpZy5hZGRfdHJhY2UoXG4gICAgZ28uU3VyZmFjZShcbiAgICAgICAgeD14dmFscyxcbiAgICAgICAgeT15dmFscyxcbiAgICAgICAgej1rbm5QcmVkR3JpZC5yZXNoYXBlKDUwLCAtMSksXG4gICAgICAgIG5hbWU9J1ByZWRpY3Rpb25zJyxcbiAgICAgICAgY29sb3JzY2FsZT0ndmlyaWRpcycsXG4gICAgICAgIGNvbG9yYmFyPXsndGl0bGUnOiAnUHJpY2UgKFVTRCknfSxcbiAgICApXG4pXG5cbmZpZy51cGRhdGVfbGF5b3V0KFxuICAgIG1hcmdpbj1kaWN0KGw9MCwgcj0wLCBiPTAsIHQ9MSksXG4gICAgdGVtcGxhdGU9J3Bsb3RseV93aGl0ZScsXG4pXG5cbmZpZyJ9
</script>
</div>


<script type="pyodide-data">
eyJvcHRpb25zIjp7ImVudiI6eyJQTE9UTFlfUkVOREVSRVIiOiJwbG90bHlfbWltZXR5cGUifSwiaW5kZXhVUkwiOiJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvcHlvZGlkZS92MC4yOC4xL2Z1bGwvIn0sInBhY2thZ2VzIjp7InBrZ3MiOlsicHlvZGlkZV9odHRwIiwibWljcm9waXAiLCJpcHl0aG9uIl19fQ==
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3siY2VsbE5hbWUiOiJweW9kaWRlLTQwIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfNDAgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTQwLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtNDAtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV80MCA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfNDAsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTM5IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzkgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTM5LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzktY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zOSA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzksIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTM4IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzggPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTM4LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzgtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zOCA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzgsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTM3IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzcgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTM3LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzctY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zNyA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzcsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTM2IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzYgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTM2LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzYtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zNiA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzYsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTM1IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzUgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTM1LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzUtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zNSA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzUsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTM0IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzQgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTM0LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzQtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zNCA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzQsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTMzIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzMgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTMzLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzMtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zMyA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzMsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTMyIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzIgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTMyLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzItY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zMiA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzIsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTMxIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzEgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTMxLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzEtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zMSA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzEsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTMwIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMzAgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTMwLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMzAtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zMCA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMzAsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTI5IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMjkgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTI5LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMjktY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8yOSA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMjksIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTI4IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il9weW9kaWRlX3ZhbHVlXzI4ID0ge1xuICBjb25zdCB7IGhpZ2hsaWdodFB5dGhvbiwgYjY0RGVjb2RlfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTI4LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBldmFsdWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGlkOiBcInB5b2RpZGUtMjgtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUHl0aG9uIGNvZGVcbiAgY29uc3QgcmVzdWx0ID0gcHlvZGlkZU9qcy5wcm9jZXNzKHtjb2RlOiBibG9jay5jb2RlLCBvcHRpb25zfSwge30pO1xuXG4gIC8vIEVhcmx5IHlpZWxkIHdoaWxlIHdlIHdhaXQgZm9yIHRoZSBmaXJzdCBldmFsdWF0aW9uIGFuZCByZW5kZXJcbiAgaWYgKG9wdGlvbnMub3V0cHV0ICYmICEoXCIyOFwiIGluIHB5b2RpZGVPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSBweXRob25cIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UHl0aG9uKGJsb2NrLmNvZGUpKTtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWdyb3cgc3Bpbm5lci1ncm93LXNtIG0tMiBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCI7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgfVxuXG4gICAgeWllbGQgY29udGFpbmVyO1xuICB9XG5cbiAgcHlvZGlkZU9qcy5yZW5kZXJlZE9qc1tcIjI4XCJdID0gdHJ1ZTtcbiAgeWllbGQgYXdhaXQgcmVzdWx0O1xufVxuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMjciLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoiX3B5b2RpZGVfdmFsdWVfMjcgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UHl0aG9uLCBiNjREZWNvZGV9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMjctY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV2YWx1YXRpb24gY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgaWQ6IFwicHlvZGlkZS0yNy1jb250ZW50c1wiLFxuICAgIGVjaG86IHRydWUsXG4gICAgb3V0cHV0OiB0cnVlXG4gIH0sIGJsb2NrLmF0dHIpO1xuXG4gIC8vIEV2YWx1YXRlIHRoZSBwcm92aWRlZCBQeXRob24gY29kZVxuICBjb25zdCByZXN1bHQgPSBweW9kaWRlT2pzLnByb2Nlc3Moe2NvZGU6IGJsb2NrLmNvZGUsIG9wdGlvbnN9LCB7fSk7XG5cbiAgLy8gRWFybHkgeWllbGQgd2hpbGUgd2Ugd2FpdCBmb3IgdGhlIGZpcnN0IGV2YWx1YXRpb24gYW5kIHJlbmRlclxuICBpZiAob3B0aW9ucy5vdXRwdXQgJiYgIShcIjI3XCIgaW4gcHlvZGlkZU9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHB5dGhvblwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChoaWdobGlnaHRQeXRob24oYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICBweW9kaWRlT2pzLnJlbmRlcmVkT2pzW1wiMjdcIl0gPSB0cnVlO1xuICB5aWVsZCBhd2FpdCByZXN1bHQ7XG59XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0yNiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfcHlvZGlkZV92YWx1ZV8yNiA9IHtcbiAgY29uc3QgeyBoaWdobGlnaHRQeXRob24sIGI2NERlY29kZX0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS0yNi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJweW9kaWRlLTI2LWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFB5dGhvbiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHB5b2RpZGVPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiMjZcIiBpbiBweW9kaWRlT2pzLnJlbmRlcmVkT2pzKSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBpZiAob3B0aW9ucy5lY2hvKSB7XG4gICAgICAvLyBTaG93IG91dHB1dCBhcyBoaWdobGlnaHRlZCBzb3VyY2VcbiAgICAgIGNvbnN0IHByZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZVwiO1xuICAgICAgcHJlRWxlbS5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGUgcHl0aG9uXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKGhpZ2hsaWdodFB5dGhvbihibG9jay5jb2RlKSk7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ncm93IHNwaW5uZXItZ3Jvdy1zbSBtLTIgcG9zaXRpb24tYWJzb2x1dGUgdG9wLTAgZW5kLTBcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJlRWxlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIH1cblxuICAgIHlpZWxkIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHB5b2RpZGVPanMucmVuZGVyZWRPanNbXCIyNlwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTI1IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMjUgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTI1LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMjUtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8yNSA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMjUsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTI0IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMjQgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTI0LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMjQtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8yNCA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMjQsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTIzIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMjMgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTIzLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMjMtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8yMyA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMjMsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTIyIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMjIgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTIyLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMjItY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8yMiA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfMjIsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTIxIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il9weW9kaWRlX3ZhbHVlXzIxID0ge1xuICBjb25zdCB7IGhpZ2hsaWdodFB5dGhvbiwgYjY0RGVjb2RlfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTIxLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBldmFsdWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGlkOiBcInB5b2RpZGUtMjEtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUHl0aG9uIGNvZGVcbiAgY29uc3QgcmVzdWx0ID0gcHlvZGlkZU9qcy5wcm9jZXNzKHtjb2RlOiBibG9jay5jb2RlLCBvcHRpb25zfSwge30pO1xuXG4gIC8vIEVhcmx5IHlpZWxkIHdoaWxlIHdlIHdhaXQgZm9yIHRoZSBmaXJzdCBldmFsdWF0aW9uIGFuZCByZW5kZXJcbiAgaWYgKG9wdGlvbnMub3V0cHV0ICYmICEoXCIyMVwiIGluIHB5b2RpZGVPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSBweXRob25cIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UHl0aG9uKGJsb2NrLmNvZGUpKTtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWdyb3cgc3Bpbm5lci1ncm93LXNtIG0tMiBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCI7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgfVxuXG4gICAgeWllbGQgY29udGFpbmVyO1xuICB9XG5cbiAgcHlvZGlkZU9qcy5yZW5kZXJlZE9qc1tcIjIxXCJdID0gdHJ1ZTtcbiAgeWllbGQgYXdhaXQgcmVzdWx0O1xufVxuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMjAiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF9weW9kaWRlX2VkaXRvcl8yMCA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMjAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgcHlvZGlkZS0yMC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IoXG4gICAgcHlvZGlkZU9qcy5weW9kaWRlUHJvbWlzZSxcbiAgICBibG9jay5jb2RlLFxuICAgIG9wdGlvbnNcbiAgKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl9weW9kaWRlX3ZhbHVlXzIwID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl8yMCwge30pO1xuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMTkiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF9weW9kaWRlX2VkaXRvcl8xOSA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMTktY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgcHlvZGlkZS0xOS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IoXG4gICAgcHlvZGlkZU9qcy5weW9kaWRlUHJvbWlzZSxcbiAgICBibG9jay5jb2RlLFxuICAgIG9wdGlvbnNcbiAgKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl9weW9kaWRlX3ZhbHVlXzE5ID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl8xOSwge30pO1xuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMTgiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF9weW9kaWRlX2VkaXRvcl8xOCA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMTgtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgcHlvZGlkZS0xOC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IoXG4gICAgcHlvZGlkZU9qcy5weW9kaWRlUHJvbWlzZSxcbiAgICBibG9jay5jb2RlLFxuICAgIG9wdGlvbnNcbiAgKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl9weW9kaWRlX3ZhbHVlXzE4ID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl8xOCwge30pO1xuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMTciLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoiX3B5b2RpZGVfdmFsdWVfMTcgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UHl0aG9uLCBiNjREZWNvZGV9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMTctY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV2YWx1YXRpb24gY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgaWQ6IFwicHlvZGlkZS0xNy1jb250ZW50c1wiLFxuICAgIGVjaG86IHRydWUsXG4gICAgb3V0cHV0OiB0cnVlXG4gIH0sIGJsb2NrLmF0dHIpO1xuXG4gIC8vIEV2YWx1YXRlIHRoZSBwcm92aWRlZCBQeXRob24gY29kZVxuICBjb25zdCByZXN1bHQgPSBweW9kaWRlT2pzLnByb2Nlc3Moe2NvZGU6IGJsb2NrLmNvZGUsIG9wdGlvbnN9LCB7fSk7XG5cbiAgLy8gRWFybHkgeWllbGQgd2hpbGUgd2Ugd2FpdCBmb3IgdGhlIGZpcnN0IGV2YWx1YXRpb24gYW5kIHJlbmRlclxuICBpZiAob3B0aW9ucy5vdXRwdXQgJiYgIShcIjE3XCIgaW4gcHlvZGlkZU9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHB5dGhvblwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChoaWdobGlnaHRQeXRob24oYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICBweW9kaWRlT2pzLnJlbmRlcmVkT2pzW1wiMTdcIl0gPSB0cnVlO1xuICB5aWVsZCBhd2FpdCByZXN1bHQ7XG59XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0xNiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfcHlvZGlkZV92YWx1ZV8xNiA9IHtcbiAgY29uc3QgeyBoaWdobGlnaHRQeXRob24sIGI2NERlY29kZX0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS0xNi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJweW9kaWRlLTE2LWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFB5dGhvbiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHB5b2RpZGVPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiMTZcIiBpbiBweW9kaWRlT2pzLnJlbmRlcmVkT2pzKSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBpZiAob3B0aW9ucy5lY2hvKSB7XG4gICAgICAvLyBTaG93IG91dHB1dCBhcyBoaWdobGlnaHRlZCBzb3VyY2VcbiAgICAgIGNvbnN0IHByZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZVwiO1xuICAgICAgcHJlRWxlbS5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGUgcHl0aG9uXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKGhpZ2hsaWdodFB5dGhvbihibG9jay5jb2RlKSk7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ncm93IHNwaW5uZXItZ3Jvdy1zbSBtLTIgcG9zaXRpb24tYWJzb2x1dGUgdG9wLTAgZW5kLTBcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJlRWxlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIH1cblxuICAgIHlpZWxkIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHB5b2RpZGVPanMucmVuZGVyZWRPanNbXCIxNlwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTE1IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il9weW9kaWRlX3ZhbHVlXzE1ID0ge1xuICBjb25zdCB7IGhpZ2hsaWdodFB5dGhvbiwgYjY0RGVjb2RlfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTE1LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBldmFsdWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGlkOiBcInB5b2RpZGUtMTUtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUHl0aG9uIGNvZGVcbiAgY29uc3QgcmVzdWx0ID0gcHlvZGlkZU9qcy5wcm9jZXNzKHtjb2RlOiBibG9jay5jb2RlLCBvcHRpb25zfSwge30pO1xuXG4gIC8vIEVhcmx5IHlpZWxkIHdoaWxlIHdlIHdhaXQgZm9yIHRoZSBmaXJzdCBldmFsdWF0aW9uIGFuZCByZW5kZXJcbiAgaWYgKG9wdGlvbnMub3V0cHV0ICYmICEoXCIxNVwiIGluIHB5b2RpZGVPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSBweXRob25cIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UHl0aG9uKGJsb2NrLmNvZGUpKTtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWdyb3cgc3Bpbm5lci1ncm93LXNtIG0tMiBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCI7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgfVxuXG4gICAgeWllbGQgY29udGFpbmVyO1xuICB9XG5cbiAgcHlvZGlkZU9qcy5yZW5kZXJlZE9qc1tcIjE1XCJdID0gdHJ1ZTtcbiAgeWllbGQgYXdhaXQgcmVzdWx0O1xufVxuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMTQiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoiX3B5b2RpZGVfdmFsdWVfMTQgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UHl0aG9uLCBiNjREZWNvZGV9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMTQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV2YWx1YXRpb24gY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgaWQ6IFwicHlvZGlkZS0xNC1jb250ZW50c1wiLFxuICAgIGVjaG86IHRydWUsXG4gICAgb3V0cHV0OiB0cnVlXG4gIH0sIGJsb2NrLmF0dHIpO1xuXG4gIC8vIEV2YWx1YXRlIHRoZSBwcm92aWRlZCBQeXRob24gY29kZVxuICBjb25zdCByZXN1bHQgPSBweW9kaWRlT2pzLnByb2Nlc3Moe2NvZGU6IGJsb2NrLmNvZGUsIG9wdGlvbnN9LCB7fSk7XG5cbiAgLy8gRWFybHkgeWllbGQgd2hpbGUgd2Ugd2FpdCBmb3IgdGhlIGZpcnN0IGV2YWx1YXRpb24gYW5kIHJlbmRlclxuICBpZiAob3B0aW9ucy5vdXRwdXQgJiYgIShcIjE0XCIgaW4gcHlvZGlkZU9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHB5dGhvblwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChoaWdobGlnaHRQeXRob24oYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICBweW9kaWRlT2pzLnJlbmRlcmVkT2pzW1wiMTRcIl0gPSB0cnVlO1xuICB5aWVsZCBhd2FpdCByZXN1bHQ7XG59XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0xMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3B5b2RpZGVfZWRpdG9yXzEzID0ge1xuICBjb25zdCB7IFB5b2RpZGVFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS0xMy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGBweW9kaWRlLTEzLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFB5b2RpZGVFeGVyY2lzZUVkaXRvcihcbiAgICBweW9kaWRlT2pzLnB5b2RpZGVQcm9taXNlLFxuICAgIGJsb2NrLmNvZGUsXG4gICAgb3B0aW9uc1xuICApO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3B5b2RpZGVfdmFsdWVfMTMgPSBweW9kaWRlT2pzLnByb2Nlc3MoX3B5b2RpZGVfZWRpdG9yXzEzLCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0xMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfcHlvZGlkZV92YWx1ZV8xMiA9IHtcbiAgY29uc3QgeyBoaWdobGlnaHRQeXRob24sIGI2NERlY29kZX0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS0xMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJweW9kaWRlLTEyLWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFB5dGhvbiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHB5b2RpZGVPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiMTJcIiBpbiBweW9kaWRlT2pzLnJlbmRlcmVkT2pzKSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBpZiAob3B0aW9ucy5lY2hvKSB7XG4gICAgICAvLyBTaG93IG91dHB1dCBhcyBoaWdobGlnaHRlZCBzb3VyY2VcbiAgICAgIGNvbnN0IHByZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZVwiO1xuICAgICAgcHJlRWxlbS5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGUgcHl0aG9uXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKGhpZ2hsaWdodFB5dGhvbihibG9jay5jb2RlKSk7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ncm93IHNwaW5uZXItZ3Jvdy1zbSBtLTIgcG9zaXRpb24tYWJzb2x1dGUgdG9wLTAgZW5kLTBcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJlRWxlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIH1cblxuICAgIHlpZWxkIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHB5b2RpZGVPanMucmVuZGVyZWRPanNbXCIxMlwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTExIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il9weW9kaWRlX3ZhbHVlXzExID0ge1xuICBjb25zdCB7IGhpZ2hsaWdodFB5dGhvbiwgYjY0RGVjb2RlfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTExLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBldmFsdWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGlkOiBcInB5b2RpZGUtMTEtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUHl0aG9uIGNvZGVcbiAgY29uc3QgcmVzdWx0ID0gcHlvZGlkZU9qcy5wcm9jZXNzKHtjb2RlOiBibG9jay5jb2RlLCBvcHRpb25zfSwge30pO1xuXG4gIC8vIEVhcmx5IHlpZWxkIHdoaWxlIHdlIHdhaXQgZm9yIHRoZSBmaXJzdCBldmFsdWF0aW9uIGFuZCByZW5kZXJcbiAgaWYgKG9wdGlvbnMub3V0cHV0ICYmICEoXCIxMVwiIGluIHB5b2RpZGVPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSBweXRob25cIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UHl0aG9uKGJsb2NrLmNvZGUpKTtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWdyb3cgc3Bpbm5lci1ncm93LXNtIG0tMiBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCI7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgfVxuXG4gICAgeWllbGQgY29udGFpbmVyO1xuICB9XG5cbiAgcHlvZGlkZU9qcy5yZW5kZXJlZE9qc1tcIjExXCJdID0gdHJ1ZTtcbiAgeWllbGQgYXdhaXQgcmVzdWx0O1xufVxuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtMTAiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF9weW9kaWRlX2VkaXRvcl8xMCA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMTAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgcHlvZGlkZS0xMC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IoXG4gICAgcHlvZGlkZU9qcy5weW9kaWRlUHJvbWlzZSxcbiAgICBibG9jay5jb2RlLFxuICAgIG9wdGlvbnNcbiAgKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl9weW9kaWRlX3ZhbHVlXzEwID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl8xMCwge30pO1xuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtOSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfcHlvZGlkZV92YWx1ZV85ID0ge1xuICBjb25zdCB7IGhpZ2hsaWdodFB5dGhvbiwgYjY0RGVjb2RlfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTktY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV2YWx1YXRpb24gY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgaWQ6IFwicHlvZGlkZS05LWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFB5dGhvbiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHB5b2RpZGVPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiOVwiIGluIHB5b2RpZGVPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSBweXRob25cIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UHl0aG9uKGJsb2NrLmNvZGUpKTtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWdyb3cgc3Bpbm5lci1ncm93LXNtIG0tMiBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCI7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgfVxuXG4gICAgeWllbGQgY29udGFpbmVyO1xuICB9XG5cbiAgcHlvZGlkZU9qcy5yZW5kZXJlZE9qc1tcIjlcIl0gPSB0cnVlO1xuICB5aWVsZCBhd2FpdCByZXN1bHQ7XG59XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS04IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfOCA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtOC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGBweW9kaWRlLTgtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV84ID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl84LCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS03IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il9weW9kaWRlX3ZhbHVlXzcgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UHl0aG9uLCBiNjREZWNvZGV9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJweW9kaWRlLTctY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUHl0aG9uIGNvZGVcbiAgY29uc3QgcmVzdWx0ID0gcHlvZGlkZU9qcy5wcm9jZXNzKHtjb2RlOiBibG9jay5jb2RlLCBvcHRpb25zfSwge30pO1xuXG4gIC8vIEVhcmx5IHlpZWxkIHdoaWxlIHdlIHdhaXQgZm9yIHRoZSBmaXJzdCBldmFsdWF0aW9uIGFuZCByZW5kZXJcbiAgaWYgKG9wdGlvbnMub3V0cHV0ICYmICEoXCI3XCIgaW4gcHlvZGlkZU9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHB5dGhvblwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChoaWdobGlnaHRQeXRob24oYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICBweW9kaWRlT2pzLnJlbmRlcmVkT2pzW1wiN1wiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLTYiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoiX3B5b2RpZGVfdmFsdWVfNiA9IHtcbiAgY29uc3QgeyBoaWdobGlnaHRQeXRob24sIGI2NERlY29kZX0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS02LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBldmFsdWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIGlkOiBcInB5b2RpZGUtNi1jb250ZW50c1wiLFxuICAgIGVjaG86IHRydWUsXG4gICAgb3V0cHV0OiB0cnVlXG4gIH0sIGJsb2NrLmF0dHIpO1xuXG4gIC8vIEV2YWx1YXRlIHRoZSBwcm92aWRlZCBQeXRob24gY29kZVxuICBjb25zdCByZXN1bHQgPSBweW9kaWRlT2pzLnByb2Nlc3Moe2NvZGU6IGJsb2NrLmNvZGUsIG9wdGlvbnN9LCB7fSk7XG5cbiAgLy8gRWFybHkgeWllbGQgd2hpbGUgd2Ugd2FpdCBmb3IgdGhlIGZpcnN0IGV2YWx1YXRpb24gYW5kIHJlbmRlclxuICBpZiAob3B0aW9ucy5vdXRwdXQgJiYgIShcIjZcIiBpbiBweW9kaWRlT2pzLnJlbmRlcmVkT2pzKSkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3Qgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBpZiAob3B0aW9ucy5lY2hvKSB7XG4gICAgICAvLyBTaG93IG91dHB1dCBhcyBoaWdobGlnaHRlZCBzb3VyY2VcbiAgICAgIGNvbnN0IHByZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZVwiO1xuICAgICAgcHJlRWxlbS5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGUgcHl0aG9uXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKGhpZ2hsaWdodFB5dGhvbihibG9jay5jb2RlKSk7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ncm93IHNwaW5uZXItZ3Jvdy1zbSBtLTIgcG9zaXRpb24tYWJzb2x1dGUgdG9wLTAgZW5kLTBcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJlRWxlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIH1cblxuICAgIHlpZWxkIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHB5b2RpZGVPanMucmVuZGVyZWRPanNbXCI2XCJdID0gdHJ1ZTtcbiAgeWllbGQgYXdhaXQgcmVzdWx0O1xufVxuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3B5b2RpZGVfZWRpdG9yXzUgPSB7XG4gIGNvbnN0IHsgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgcHlvZGlkZS01LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFB5b2RpZGVFeGVyY2lzZUVkaXRvcihcbiAgICBweW9kaWRlT2pzLnB5b2RpZGVQcm9taXNlLFxuICAgIGJsb2NrLmNvZGUsXG4gICAgb3B0aW9uc1xuICApO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3B5b2RpZGVfdmFsdWVfNSA9IHB5b2RpZGVPanMucHJvY2VzcyhfcHlvZGlkZV9lZGl0b3JfNSwge30pO1xuIn0seyJjZWxsTmFtZSI6InB5b2RpZGUtNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfcHlvZGlkZV92YWx1ZV80ID0ge1xuICBjb25zdCB7IGhpZ2hsaWdodFB5dGhvbiwgYjY0RGVjb2RlfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLTQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV2YWx1YXRpb24gY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgaWQ6IFwicHlvZGlkZS00LWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFB5dGhvbiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHB5b2RpZGVPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiNFwiIGluIHB5b2RpZGVPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSBweXRob25cIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UHl0aG9uKGJsb2NrLmNvZGUpKTtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWdyb3cgc3Bpbm5lci1ncm93LXNtIG0tMiBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVFbGVtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCI7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgfVxuXG4gICAgeWllbGQgY29udGFpbmVyO1xuICB9XG5cbiAgcHlvZGlkZU9qcy5yZW5kZXJlZE9qc1tcIjRcIl0gPSB0cnVlO1xuICB5aWVsZCBhd2FpdCByZXN1bHQ7XG59XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0zIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMyA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGBweW9kaWRlLTMtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8zID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl8zLCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0yIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfcHlvZGlkZV9lZGl0b3JfMiA9IHtcbiAgY29uc3QgeyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGBweW9kaWRlLTItY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgUHlvZGlkZUV4ZXJjaXNlRWRpdG9yKFxuICAgIHB5b2RpZGVPanMucHlvZGlkZVByb21pc2UsXG4gICAgYmxvY2suY29kZSxcbiAgICBvcHRpb25zXG4gICk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fcHlvZGlkZV92YWx1ZV8yID0gcHlvZGlkZU9qcy5wcm9jZXNzKF9weW9kaWRlX2VkaXRvcl8yLCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS0xIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il9weW9kaWRlX3ZhbHVlXzEgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UHl0aG9uLCBiNjREZWNvZGV9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInB5b2RpZGUtMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJweW9kaWRlLTEtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUHl0aG9uIGNvZGVcbiAgY29uc3QgcmVzdWx0ID0gcHlvZGlkZU9qcy5wcm9jZXNzKHtjb2RlOiBibG9jay5jb2RlLCBvcHRpb25zfSwge30pO1xuXG4gIC8vIEVhcmx5IHlpZWxkIHdoaWxlIHdlIHdhaXQgZm9yIHRoZSBmaXJzdCBldmFsdWF0aW9uIGFuZCByZW5kZXJcbiAgaWYgKG9wdGlvbnMub3V0cHV0ICYmICEoXCIxXCIgaW4gcHlvZGlkZU9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHB5dGhvblwiO1xuICAgICAgcHJlRWxlbS5hcHBlbmRDaGlsZChoaWdobGlnaHRQeXRob24oYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICBweW9kaWRlT2pzLnJlbmRlcmVkT2pzW1wiMVwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJweW9kaWRlLXByZWx1ZGUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJweW9kaWRlT2pzID0ge1xuICBjb25zdCB7XG4gICAgUHlvZGlkZUV2YWx1YXRvcixcbiAgICBQeW9kaWRlRW52aXJvbm1lbnRNYW5hZ2VyLFxuICAgIHNldHVwUHl0aG9uLFxuICAgIHN0YXJ0UHlvZGlkZVdvcmtlcixcbiAgICBiNjREZWNvZGUsXG4gICAgY29sbGFwc2VQYXRoLFxuICB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzdGF0dXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV4ZXJjaXNlLWxvYWRpbmctc3RhdHVzXCIpO1xuICBjb25zdCBpbmRpY2F0b3JDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV4ZXJjaXNlLWxvYWRpbmctaW5kaWNhdG9yXCIpO1xuICBpbmRpY2F0b3JDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImQtbm9uZVwiKTtcblxuICBsZXQgc3RhdHVzVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgc3RhdHVzVGV4dC5jbGFzc0xpc3QgPSBcImV4ZXJjaXNlLWxvYWRpbmctZGV0YWlsc1wiO1xuICBzdGF0dXNUZXh0ID0gc3RhdHVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c1RleHQpO1xuICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluaXRpYWxpc2VgO1xuXG4gIC8vIEhvaXN0IGluZGljYXRvciBvdXQgZnJvbSBmaW5hbCBzbGlkZSB3aGVuIHJ1bm5pbmcgdW5kZXIgcmV2ZWFsXG4gIGNvbnN0IHJldmVhbFN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2ZWFsIC5leGVyY2lzZS1sb2FkaW5nLWluZGljYXRvclwiKTtcbiAgaWYgKHJldmVhbFN0YXR1cykge1xuICAgIHJldmVhbFN0YXR1cy5yZW1vdmUoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmVhbCA+IC5zbGlkZXNcIikuYXBwZW5kQ2hpbGQocmV2ZWFsU3RhdHVzKTtcbiAgfVxuXG4gIC8vIE1ha2UgYW55IHJldmVhbCBzbGlkZXMgd2l0aCBsaXZlIGNlbGxzIHNjcm9sbGFibGVcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5yZXZlYWwgLmV4ZXJjaXNlLWNlbGxcIikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBlbC5jbG9zZXN0KCdzZWN0aW9uLnNsaWRlJykuY2xhc3NMaXN0LmFkZChcInNjcm9sbGFibGVcIik7XG4gIH0pXG5cbiAgLy8gUHlvZGlkZSBzdXBwbGVtZW50YWwgZGF0YSBhbmQgb3B0aW9uc1xuICBjb25zdCBkYXRhQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJweW9kaWRlLWRhdGFcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShiNjREZWNvZGUoZGF0YUNvbnRlbnQpKTtcblxuICAvLyBHcmFiIGxpc3Qgb2YgcmVzb3VyY2VzIHRvIGJlIGRvd25sb2FkZWRcbiAgY29uc3QgZmlsZXNDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInZmcy1maWxlXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgZmlsZXMgPSBKU09OLnBhcnNlKGI2NERlY29kZShmaWxlc0NvbnRlbnQpKTtcblxuICBsZXQgcHlvZGlkZVByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgUHlvZGlkZWA7XG4gICAgY29uc3QgcHlvZGlkZSA9IGF3YWl0IHN0YXJ0UHlvZGlkZVdvcmtlcihkYXRhLm9wdGlvbnMpO1xuXG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiBtaWNyb3BpcGA7XG4gICAgYXdhaXQgcHlvZGlkZS5sb2FkUGFja2FnZShcIm1pY3JvcGlwXCIpO1xuICAgIGNvbnN0IG1pY3JvcGlwID0gYXdhaXQgcHlvZGlkZS5weWltcG9ydChcIm1pY3JvcGlwXCIpO1xuICAgIGF3YWl0IGRhdGEucGFja2FnZXMucGtncy5tYXAoKHBrZykgPT4gKCkgPT4ge1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiAke3BrZ31gO1xuICAgICAgcmV0dXJuIG1pY3JvcGlwLmluc3RhbGwocGtnKTtcbiAgICB9KS5yZWR1Y2UoKGN1ciwgbmV4dCkgPT4gY3VyLnRoZW4obmV4dCksIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICBhd2FpdCBtaWNyb3BpcC5kZXN0cm95KCk7XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgaW5zdGFsbCByZXNvdXJjZXNcbiAgICBhd2FpdCBmaWxlcy5tYXAoKGZpbGUpID0+IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnN1YnN0cmluZyhmaWxlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcmVzb3VyY2U6ICR7bmFtZX1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBkb3dubG9hZCBcXGAke2ZpbGV9XFxgLiBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306IFwiJHtyZXNwb25zZS5zdGF0dXNUZXh0fVwiLmApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG5cbiAgICAgIC8vIFN0b3JlIFVSTHMgaW4gdGhlIGN3ZCB3aXRob3V0IGFueSBzdWJkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBpZiAoZmlsZS5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICBmaWxlID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgaGlnaGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZpbGUgPSBjb2xsYXBzZVBhdGgoZmlsZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcnkgdHJlZSwgaWdub3JpbmcgXCJkaXJlY3RvcnkgZXhpc3RzXCIgVkZTIGVycm9yc1xuICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhdGggKz0gcGFydHMuc2hpZnQoKSArICcvJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBweW9kaWRlLkZTLm1rZGlyKHBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKGUubmFtZSAhPT0gXCJFcnJub0Vycm9yXCIpIHRocm93IGU7XG4gICAgICAgICAgaWYgKGUuZXJybm8gIT09IDIwKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvclRleHRQdHIgPSBhd2FpdCBweW9kaWRlLl9tb2R1bGUuX3N0cmVycm9yKGUuZXJybm8pO1xuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcHlvZGlkZS5fbW9kdWxlLlVURjhUb1N0cmluZyhlcnJvclRleHRQdHIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlc3lzdGVtIEVycm9yICR7ZS5lcnJub30gXCIke2Vycm9yVGV4dH1cIi5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV3JpdGUgdGhpcyBmaWxlIHRvIHRoZSBWRlNcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBweW9kaWRlLkZTLndyaXRlRmlsZShmaWxlLCBuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlLm5hbWUgIT09IFwiRXJybm9FcnJvclwiKSB0aHJvdyBlO1xuICAgICAgICBjb25zdCBlcnJvclRleHRQdHIgPSBhd2FpdCBweW9kaWRlLl9tb2R1bGUuX3N0cmVycm9yKGUuZXJybm8pO1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBweW9kaWRlLl9tb2R1bGUuVVRGOFRvU3RyaW5nKGVycm9yVGV4dFB0cik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZXN5c3RlbSBFcnJvciAke2UuZXJybm99IFwiJHtlcnJvclRleHR9XCIuYCk7XG4gICAgICB9XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYFB5b2RpZGUgZW52aXJvbm1lbnQgc2V0dXBgO1xuICAgIGF3YWl0IHNldHVwUHl0aG9uKHB5b2RpZGUpO1xuXG4gICAgc3RhdHVzVGV4dC5yZW1vdmUoKTtcbiAgICBpZiAoc3RhdHVzQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCA9PSAwKSB7XG4gICAgICBzdGF0dXNDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHB5b2RpZGU7XG4gIH0pKCkuY2F0Y2goKGVycikgPT4ge1xuICAgIHN0YXR1c1RleHQuc3R5bGUuY29sb3IgPSBcInZhcigtLWV4ZXJjaXNlLWVkaXRvci1obC1lciwgI0FEMDAwMClcIjtcbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gZXJyLm1lc3NhZ2U7XG4gICAgLy9pbmRpY2F0b3JDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5zcGlubmVyLWdyb3dcIikuY2xhc3NMaXN0LmFkZChcImQtbm9uZVwiKTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xuXG4gIC8vIEtlZXAgdHJhY2sgb2YgaW5pdGlhbCBPSlMgYmxvY2sgcmVuZGVyXG4gIGNvbnN0IHJlbmRlcmVkT2pzID0ge307XG5cbiAgY29uc3QgcHJvY2VzcyA9IGFzeW5jIChjb250ZXh0LCBpbnB1dHMpID0+IHtcbiAgICBjb25zdCBweW9kaWRlID0gYXdhaXQgcHlvZGlkZVByb21pc2U7XG4gICAgY29uc3QgZXZhbHVhdG9yID0gbmV3IFB5b2RpZGVFdmFsdWF0b3IocHlvZGlkZSwgY29udGV4dCk7XG4gICAgYXdhaXQgZXZhbHVhdG9yLnByb2Nlc3MoaW5wdXRzKTtcbiAgICByZXR1cm4gZXZhbHVhdG9yLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHlvZGlkZVByb21pc2UsXG4gICAgcmVuZGVyZWRPanMsXG4gICAgcHJvY2VzcyxcbiAgfTtcbn1cbiJ9XX0=
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
WyJkYXRhL2Nhbl9sYW5nLnhsc3giLCJkYXRhL0hlYXJ0LmNzdiIsImRhdGEvd2RiYy5jc3YiLCJkYXRhL25hc2EuanNvbiIsImRhdGEvbWF1bmFfbG9hX2RhdGEuY3N2IiwiZGF0YS9yZWdpb25fbGFuZ190b3A1X2NpdGllc19sb25nLmNzdiIsImRhdGEvY2FuX2xhbmcuY3N2IiwiZGF0YS9tYXVuYV9sb2EuY3N2IiwiZGF0YS93ZGJjX21pc3NpbmcuY3N2IiwiZGF0YS9saXN0aW5ncy5jc3YiLCJkYXRhL3NhY3JhbWVudG8uY3N2IiwiZGF0YS9yZWdpb25fZGF0YS5jc3YiLCJkYXRhL21vcmxleS5jc3YiLCJkYXRhL3Blbmd1aW5zX2FsbF92YXJzLmNzdiIsImRhdGEvY2FuX2xhbmcudHN2IiwiZGF0YS9jYW5fbGFuZ19ub19uYW1lcy50c3YiLCJkYXRhL25vX29mZmljaWFsX2xhbmd1YWdlcy5jc3YiLCJkYXRhL3JlZ2lvbl9sYW5nLmNzdiIsImRhdGEvd2RiY191bnNjYWxlZC5jc3YiLCJkYXRhL3JlZ2lvbl9sYW5nX3RvcDVfY2l0aWVzX3dpZGUuY3N2IiwiZGF0YS9jYW5fbGFuZ19tZXRhLWRhdGEuY3N2IiwiZGF0YS9jYW5fbGFuZy5kYiIsImRhdGEvaXNsYW5kcy5jc3YiLCJkYXRhL2ZhaXRoZnVsLmNzdiIsImRhdGEvcmVnaW9uX2xhbmdfdG9wNV9jaXRpZXNfbWVzc3kuY3N2IiwiZGF0YS9wZW5ndWlucy5jc3YiXQ==
</script>
</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="ojs-module-contents">
    eyJjb250ZW50cyI6W119
    </script>
    <script type="module">
    if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
    window._ojs.paths.runtimeToDoc = "../../materials/slides";
    window._ojs.paths.runtimeToRoot = "../..";
    window._ojs.paths.docToRoot = "../..";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/posit-conf-2025\.github\.io\/scikit-learn\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>